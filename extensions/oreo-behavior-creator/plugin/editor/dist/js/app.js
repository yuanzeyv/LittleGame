(function(e){function t(t){for(var i,a,s=t[0],c=t[1],l=t[2],u=0,d=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);h&&h(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(i=!1)}i&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},o={app:0},r=[];function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var h=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("64a9")},1:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),o=n("28dd"),r=n("a925"),a=n("3d29"),s=n.n(a),c=n("8f94"),l=n.n(c),h=n("e069"),u=n.n(h),d=(n("dcad"),n("1f54"),n("9992"),n("a7be"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Layout",{staticClass:"tools-main"},[n("Editor")],1)],1)}),f=[],v=(n("a481"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.isValid(),expression:"isValid()"},{name:"resize",rawName:"v-resize",value:e.onContainerResize,expression:"onContainerResize"}],staticClass:"container"},[n("div",{attrs:{id:"scene"},on:{dragover:function(t){return e.dragover_handler(t)},drop:function(t){return e.drop_handler(t)}}}),e.menu.visible?n("div",{class:e.isBuildin?"menu menu-buildin":"menu"},[n("Row",[n("ButtonGroup",{attrs:{size:"small"}},[n("Button",{attrs:{icon:"ios-folder-open"},on:{click:e.load}},[e._v("Load")]),n("Button",{attrs:{icon:"md-download"},on:{click:e.save}},[e._v("Save")])],1)],1)],1):e._e(),n("Sider",{ref:"aside",staticClass:"sider",attrs:{"hide-trigger":"",width:"265"}},[n("Tabs",{attrs:{type:"card",align:"left"}},[n("TabPane",{attrs:{label:"Node"}},[n("Collapse",{attrs:{accordion:e.getAccordion(),value:e.getCollapseValue("Node")},on:{"on-change":function(t){return e.setCollapseValue("Node",t)}}},[e._l(e.groups,(function(t){return[n("Panel",{key:t.title,staticClass:"panel-group",attrs:{name:t.title}},[e._v("\n                "+e._s(t.title)+"\n                "),n("div",{attrs:{slot:"content"},slot:"content"},[e._l(e.getComponents(t.group),(function(t,i){return[n("Button",{key:i,staticClass:"button-type",attrs:{draggable:"",long:""},nativeOn:{dragstart:function(n){return e.onBtnDragStart(n,t)}}},[n("Icon",{class:"button-icon "+e.getIconClass(t),attrs:{type:e.getIcon(t)}}),e._v("\n                    "+e._s(t.name)+"\n                    ")],1)]}))],2)])]}))],2)],1),n("TabPane",{attrs:{label:"Blackboard"}},[e.isBuildin?e._e():n("div",{attrs:{id:"blackboard"}},[n("ui-prop",{},[n("div",{staticClass:"row_item",attrs:{slot:"label"},slot:"label"},[n("ui-label",{attrs:{tabindex:"-1",value:"Title",tooltip:"Title"}})],1),n("ui-input",{staticClass:"row_item",attrs:{slot:"content"},slot:"content"})],1),n("Button",{attrs:{draggable:"",long:"",icon:"ios-color-wand-outline"},nativeOn:{dragstart:function(t){return e.onBtnDragStart(t)}}},[e._v("HelloWorld")]),n("Button",{attrs:{icon:"ios-crop"},on:{click:e.handleClick}}),n("Divider")],1)]),n("TabPane",{attrs:{label:"Preference"}},[n("Collapse",{attrs:{accordion:e.getAccordion(),value:e.getCollapseValue("Preference")},on:{"on-change":function(t){return e.setCollapseValue("Preference",t)}}},[n("Panel",{attrs:{name:"Setting"}},[e._v("\n              Setting\n              "),n("div",{attrs:{slot:"content"},slot:"content"},[n("div",{staticClass:"tab-row"},[n("Tooltip",{attrs:{content:"显示或隐藏插件操作菜单",placement:"top-start"}},[n("Icon",{staticClass:"tab-row-icon",attrs:{type:"ios-list-box-outline"}}),e._v("\n                  Display the plugin's menu\n                ")],1),n("i-switch",{staticClass:"tab-row-height",attrs:{size:"small"},on:{"on-change":e.switchMenuVisible},model:{value:e.menu.visible,callback:function(t){e.$set(e.menu,"visible",t)},expression:"menu.visible"}})],1),n("div",{staticClass:"tab-row"},[n("Tooltip",{attrs:{content:"将插件设置为CocosCreator顶部窗口",placement:"top-start"}},[n("Icon",{staticClass:"tab-row-icon",attrs:{type:"ios-ionic"}}),e._v("\n                  Set the plugin to the top \n                ")],1),n("i-switch",{staticClass:"tab-row-height",attrs:{size:"small",value:e.menu.ontop},on:{"on-change":e.switchOnTop}})],1)])]),n("Panel",{attrs:{name:"Shortcut"}},[e._v("\n              Shortcut\n              "),n("div",{attrs:{slot:"content"},slot:"content"},[n("div",{staticClass:"tab-row"},[n("Tooltip",{attrs:{content:"打开",placement:"top-start"}},[n("Icon",{staticClass:"tab-row-icon-small",attrs:{type:"ios-folder-open"}}),e._v("\n                  Load ( Ctrl/Cmd + O )\n                ")],1)],1),n("div",{staticClass:"tab-row"},[n("Tooltip",{attrs:{content:"保存",placement:"top-start"}},[n("Icon",{staticClass:"tab-row-icon-small",attrs:{type:"md-download"}}),e._v("\n                  Save ( Ctrl/Cmd + S )\n                ")],1)],1)])])],1)],1),e._e()],1)],1),n("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"hydrusfile",accept:".json"},on:{change:e.loadLocalFile}})],1)}),p=[],g=(n("8e6e"),n("ac6a"),n("456d"),n("96cf"),n("1da1")),y=(n("f559"),n("7f7f"),n("ade3")),m=n("2f62"),b=n("428d"),k=n.n(b),w=n("21a6"),C=n.n(w),z=n("a002"),x=n.n(z),O=(n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("7514"),n("d4ec")),S=n("bee2"),j=n("7644"),M=n("faaf"),T=n.n(M),A=n("cc98"),I=n.n(A),D={layout:{vertical:!0},fills:{decorator:"#777777",service:"#555555",parallel:"#675F57",sequence:"#675F57",selector:"#675F57",task:"#2C2C2C"},node:{minWidth:100,minHeight:60,margin:10,space:6,childSpace:{horizonal:16,vertical:32},dragDistance:40,highlight:"#FFC125"},zone:{width:12,height:12,padding:10,fixedWidth:50,fill:"#5A5A5A",highlight:"#FFC125"},label:{iconSize:24,space:8,fontSize:16,subFontSize:12,orderFontSize:12,dropHeight:2},link:{distance:40},marker:{fill:"#CDC0B0"},svg_backup:{baseSize:1024,default:"M290.306439 218.184864c0-2.815969-1.087988-90.495005 20.671773-117.438708 22.015758-27.519697 85.055064-63.039307 85.055064-63.039307s71.935209-44.735508 85.183063-36.671597C494.656191 8.971165 492.352216 95.626212 492.352216 95.626212s-0.639993 85.631058-14.52784 110.334786C464.000528 230.600727 392.00132 273.672253 392.00132 273.672253s-63.039307 41.151547-84.671069 40.319556C286.082485 313.223818 290.242439 221.192831 290.306439 218.184864zM334.145956 656.388043c0.511994 15.551829 77.055152 56.127383 77.055152 56.127383s75.263172 41.343545 103.358863 41.343545c28.351688 0 101.054888-41.599542 101.054888-41.599542s66.815265-34.815617 76.735156-54.015406c9.727893-18.943792-72.639201-60.415335-75.263172-61.887319C614.654871 594.948719 538.687706 551.173201 504.640081 556.805139 469.760465 562.693074 407.937145 600.132662 407.937145 600.132662S333.633962 640.900214 334.145956 656.388043zM302.722302 590.980763c21.631762 0.831991 84.607069-40.319556 84.607069-40.319556s71.935209-43.071526 85.823056-67.711255C487.040275 458.374222 487.744267 372.679164 487.744267 372.679164S489.856244 286.088117 476.608389 278.024205C463.296536 269.960294 391.361327 314.631803 391.361327 314.631803S328.450019 350.34341 306.306263 377.671109C284.610501 404.678812 285.63449 492.293848 285.63449 495.237816 285.506491 498.117784 281.474536 590.212771 302.722302 590.980763zM787.964964 353.415376c13.951847 24.639729 85.951055 67.711255 85.951055 67.711255s62.975307 41.215547 84.607069 40.319556c21.183767-0.831991 17.151811-92.798979 17.087812-95.742947 0-2.879968 1.215987-90.431005-20.607773-117.566707-22.143756-27.391699-85.119064-63.039307-85.119064-63.039307s-71.935209-44.735508-85.183063-36.607597c-13.375853 7.999912-11.199877 94.590959-11.199877 94.590959S774.269115 328.903646 787.964964 353.415376zM717.821736 377.671109c-22.207756-27.391699-85.119064-63.103306-85.119064-63.103306S560.767464 269.960294 547.45561 278.024205C534.207756 286.088117 536.255733 372.679164 536.255733 372.679164s0.831991 85.631058 14.655839 110.270787c13.887847 24.639729 85.759057 67.711255 85.759057 67.711255s63.103306 41.151547 84.671069 40.319556c21.247766-0.831991 17.151811-92.926978 17.023813-95.806946C738.36551 492.293848 739.517497 404.678812 717.821736 377.671109zM546.303623 205.960998c13.759849 24.639729 85.759057 67.711255 85.759057 67.711255s63.039307 41.151547 84.671069 40.319556c21.183767-0.767992 17.151811-92.798979 17.087812-95.806946 0-2.815969 1.023989-90.495005-20.671773-117.438708-22.079757-27.519697-85.119064-63.039307-85.119064-63.039307S556.031516-7.092658 542.783661 0.971253C529.407809 8.971165 531.647784 95.626212 531.647784 95.626212S532.351776 181.25727 546.303623 205.960998zM231.299088 630.532328c13.823848-24.703728 14.591839-110.334786 14.591839-110.334786s2.175976-86.591047-11.071878-94.718958C221.379197 417.478671 149.443988 462.15018 149.443988 462.15018S86.596679 497.733789 64.452923 525.189487c-21.759761 27.071702-20.735772 114.622739-20.735772 117.502707C43.653152 645.636162 39.685195 737.667149 60.804963 738.56314c21.695761 0.703992 84.671069-40.383556 84.671069-40.383556S217.47524 654.980059 231.299088 630.532328zM860.924162 727.939256c-2.431973-1.343985-78.335138-45.247502-112.510762-39.423566-34.751618 5.695937-96.638937 43.263524-96.638937 43.263524s-74.303183 40.703552-73.855188 56.255381c0.639993 15.48783 77.119152 56.127383 77.119152 56.127383s75.263172 41.343545 103.294864 41.343545c28.351688 0 101.118888-41.727541 101.118888-41.727541s66.815265-34.815617 76.671157-54.015406C945.979226 770.882784 863.676132 729.283242 860.924162 727.939256zM65.476912 461.446188c21.631762 0.831991 84.671069-40.319556 84.671069-40.319556S222.083189 378.119104 235.971036 353.415376c13.823848-24.57573 14.655839-110.398786 14.655839-110.398786S252.738852 156.553542 239.554997 148.48963C226.115145 140.425719 154.179936 185.161227 154.179936 185.161227S91.204629 220.744836 69.124872 248.136534C47.365111 275.272236 48.453099 362.823273 48.453099 365.703241 48.3251 368.647209 44.293145 460.678196 65.476912 461.446188zM980.282849 642.692194c0.063999-2.879968 1.087988-90.431005-20.671773-117.502707-22.079757-27.455698-85.119064-63.039307-85.119064-63.039307s-71.80721-44.671509-85.183063-36.671597c-13.247854 8.127911-11.199877 94.718958-11.199877 94.718958s0.831991 85.631058 14.655839 110.334786c13.823848 24.51173 85.759057 67.711255 85.759057 67.711255s63.039307 41.087548 84.735068 40.383556C984.506802 737.667149 980.346848 645.636162 980.282849 642.692194zM445.312734 796.6745c9.663894-18.879792-72.639201-60.351336-75.327171-61.82332-2.431973-1.343985-78.335138-45.183503-112.510762-39.487566-34.687618 5.823936-96.638937 43.263524-96.638937 43.263524s-74.239183 40.831551-73.727189 56.38338 77.055152 56.063383 77.055152 56.063383 75.135174 41.343545 103.422862 41.343545 101.054888-41.599542 101.054888-41.599542S435.328843 815.938288 445.312734 796.6745zM613.886879 866.433733c-2.431973-1.343985-78.271139-45.183503-112.446763-39.423566-34.815617 5.823936-96.766936 43.199525-96.766936 43.199525s-74.175184 40.89555-73.66319 56.447379c0.511994 15.551829 77.055152 56.063383 77.055152 56.063383S483.136318 1024 511.360007 1024s101.054888-41.599542 101.054888-41.599542 66.815265-34.815617 76.671157-54.015406C698.813945 909.44126 616.51085 867.841717 613.886879 866.433733z",root:"M599.296 791.424c0-26.432 21.504-48 48-48s48 21.568 48 48-21.504 48-48 48S599.296 817.856 599.296 791.424zM391.296 743.424c-26.496 0-48 21.568-48 48s21.504 48 48 48 48-21.568 48-48S417.792 743.424 391.296 743.424zM245.12 580.8C236.416 568.832 222.912 560.448 206.912 560.448c-26.496 0-48 21.568-48 48s21.504 48 48 48 48-21.568 48-48c0-5.376-1.408-10.304-3.072-15.104L245.12 580.8zM564.288 214.272c0-26.432-21.504-48-48-48s-48 21.568-48 48 21.504 48 48 48S564.288 240.704 564.288 214.272zM816.512 560.448c-16 0-29.44 8.384-38.208 20.352l-6.72 12.48c-1.6 4.8-3.072 9.728-3.072 15.104 0 26.432 21.504 48 48 48s48-21.568 48-48S843.008 560.448 816.512 560.448zM960 512c0 247.36-200.576 448-448 448-247.36 0-448-200.64-448-448 0-247.424 200.64-448 448-448C759.424 64 960 264.576 960 512zM912.512 608.448c0-52.992-43.008-96-96-96-23.616 0-44.992 8.896-61.696 23.04-54.976-28.928-128.128-66.176-151.68-76.288C576.576 447.808 560.704 426.24 550.912 404.608 546.88 381.888 545.344 356.096 545.728 338.496L545.728 305.216c38.528-12.48 66.56-48.256 66.56-90.944 0-52.992-43.008-96-96-96s-96 43.008-96 96c0 42.944 28.352 78.848 67.328 91.136l0 33.152c-0.192 1.92 0.064 4.8 0 7.168C486.208 364.672 476.928 434.944 420.288 459.2c-23.552 10.112-96.64 47.36-151.616 76.288-16.768-14.208-38.144-23.04-61.76-23.04-52.992 0-96 43.008-96 96s43.008 96 96 96 96-43.008 96-96c0-11.84-2.432-22.976-6.336-33.408C348.608 547.776 414.72 514.048 437.568 504.064 426.88 522.688 416.448 541.312 410.24 553.216c-27.648 53.376-25.216 121.472-25.088 123.392l0 19.52c-50.112 3.264-89.856 44.48-89.856 95.36 0 52.992 43.008 96 96 96s96-43.008 96-96c0-37.952-22.208-70.4-54.144-86.016l0-29.888c-0.704-16 1.536-65.344 19.712-100.224C467.072 547.968 506.304 480.768 513.92 469.184c1.664-2.56 2.944-5.76 4.352-8.64 1.536 3.008 2.88 6.272 4.608 8.896C530.56 480.768 570.304 547.84 584.768 575.296c21.888 41.856 19.904 99.712 19.84 101.248l0 29.376c-31.424 15.744-53.248 47.936-53.248 85.504 0 52.992 43.008 96 96 96s96-43.008 96-96c0-51.2-40.256-92.672-90.752-95.488l0-18.368c0.128-2.88 2.688-70.976-25.344-124.544C622.208 543.36 613.824 528.576 604.8 512.96c30.464 14.656 80.512 40.32 121.984 62.08-3.904 10.432-6.336 21.632-6.336 33.408 0 52.992 43.008 96 96 96S912.512 661.44 912.512 608.448z",sequence:"M64 384l0 384 0 192 192 0 0-192L256 384 256 64 64 64 64 384zM192 448l0 256L128 704 128 448 192 448zM320 576l0 320 0 64 192 0 0-64L512 576 512 256 320 256 320 576zM448 640l0 192L384 832l0-192L448 640zM576 320l0 384 0 256 192 0 0-256L768 320 768 128 576 128 576 320zM704 384l0 256-64 0L640 384 704 384zM832 384l0 192 0 320 0 64 192 0 0-64L1024 576 1024 384 832 384zM960 640l0 192-64 0 0-192L960 640z",selector:"M950.658471 77.376c-61.184-63.104-261.248-76.352-418.432-76.352L525.314471 1.024C520.194471 0.896 498.370471 0.128 466.946471 0.128c-118.592 0-276.224 9.088-353.344 51.776C0.642471 114.432-2.941529 391.168 0.898471 509.248c-3.84 119.936-0.192 400.384 112.704 463.04 76.992 42.56 234.624 51.648 353.152 51.648 31.488 0 53.44-0.704 58.624-0.896l6.976 0c157.12 0 357.184-13.248 418.368-76.352 69.056-71.104 74.24-327.232 73.28-434.624C1024.962471 404.608 1019.778471 148.608 950.658471 77.376zM912.578471 910.336c-6.848 7.104-17.152 13.312-29.824 18.88L882.754471 576.832c0-19.584-15.744-35.392-35.264-35.392L776.962471 541.44c-19.52 0-35.392 15.808-35.392 35.392l0 382.912c-19.648 2.24-39.424 3.968-58.752 5.44L682.818471 788.48c0-19.584-15.808-35.264-35.328-35.264L576.962471 753.216c-19.584 0-35.392 15.68-35.392 35.264l0 182.144c-3.456 0-6.784 0-9.216 0-5.056 0-7.872 0-7.872 0s-16.384 0.512-41.728 0.64l0-270.976c0-19.52-15.808-35.264-35.328-35.264L376.834471 665.024c-19.52 0-35.328 15.744-35.328 35.264l0 267.2c-19.584-1.344-39.36-3.2-58.816-5.44L282.690471 523.776c0-19.392-15.744-35.2-35.2-35.2L176.834471 488.576c-19.52 0-35.328 15.808-35.328 35.2l0 403.52c-0.576-0.32-1.472-0.576-2.048-0.896-97.472-54.016-85.888-405.824-85.504-417.216C53.698471 503.296 50.498471 401.28 62.274471 299.392c23.296-8.192 124.032-37.248 263.04 19.584C412.802471 354.624 519.746471 429.504 557.890471 532.992l30.656 83.2 20.032-86.4c28.544-124.096 88.832-174.272 132.992-194.688l0 63.168c0 6.72 2.368 12.416 7.232 17.216 4.8 4.928 10.624 7.36 17.28 7.296 6.336-0.064 12.224-2.432 17.088-7.296l92.672-92.544c4.8-4.928 7.168-10.688 7.232-17.216-0.064-6.656-2.432-12.352-7.232-17.216l-92.736-92.672c-4.736-4.864-10.688-7.232-17.024-7.232-6.656 0-12.416 2.368-17.28 7.168-4.864 4.928-7.232 10.56-7.296 17.216l0.064 65.088c-49.344 16.448-121.472 59.968-165.056 174.656C520.450471 365.504 425.410471 302.528 345.346471 269.952 218.434471 218.176 119.874471 229.696 70.850471 241.664c12.416-66.432 33.344-124.48 68.608-144 71.232-39.552 238.72-44.992 327.488-44.992 34.816 0 57.536 0.832 57.536 0.832s2.816 0 7.808 0c50.176 0 324.48 2.688 380.288 60.288C974.146471 177.344 971.074471 512 971.074471 512S974.146471 846.72 912.578471 910.336z",decorator:"M810.688 463.616c-81.472 0-149.376 69.504-149.376 149.376 0 58.24 36.352 110.72 87.744 134.976-24.512 66.304-87.552 113.856-162.368 113.856-85.12 0-154.88-61.44-170.048-142.272 19.712-27.456 36.416-62.4 42.816-87.872 144.896-95.552 201.856-385.536 201.856-417.024 0-53.824-99.584-149.312-99.584-149.312L526.976 65.344C491.136 58.24 454.4 78.272 441.856 114.176 428.16 153.408 448.576 196.032 487.36 209.664 495.488 212.48 503.808 213.568 512 213.504l0 1.28 49.728 0C560.896 260.48 505.92 563.2 362.688 563.2c-143.04 0-199.104-348.416-199.104-348.416l32.32 0c29.632 6.528 61.248-5.76 78.528-33.344C296.32 145.92 286.016 99.392 251.328 77.12c-11.904-7.616-24.96-11.136-38.016-11.392L213.312 65.408 163.584 65.408c0 0-99.584 82.88-99.584 136.32 0 31.744 58.048 335.36 205.568 431.36 10.112 28.096 28.288 67.776 48.896 95.808 20.096 131.328 131.328 232.512 268.224 232.512 127.36 0 232.768-87.36 263.04-205.184C912.704 738.24 960 679.488 960 612.992 960 533.184 892.224 463.616 810.688 463.616zM810.688 662.72c-27.584 0-49.792-22.272-49.792-49.728 0-27.584 22.272-49.792 49.792-49.792 27.52 0 49.728 22.272 49.728 49.792C860.416 640.512 838.208 662.72 810.688 662.72z",service:"M862.336 700.672c-38.976 0-74.816 13.824-102.784 36.8l0.192-0.512c0 0-52.48 53.824-136.256 35.072l-251.2-67.264C320.64 686.08 298.24 649.024 290.048 630.528 284.352 611.968 275.264 595.008 263.296 580.288l0.192 0c0 0-45.888-52.992-28.096-129.088l38.976-145.728c14.72-44.48 47.68-62.144 64.384-70.656 23.616-8.768 43.776-24.704 57.728-45.184C406.656 177.344 433.984 150.784 482.56 148.224l226.624 0c36.992 3.008 58.624 26.816 65.344 35.52 0.448 0.64 0.896 1.28 1.28 1.856l0 0c0 0 28.032 37.76 16.192 81.536l0 0-24.512 91.648c-0.256 0.768-0.512 1.472-0.768 2.368-9.792 36.48-31.04 54.336-43.072 61.76-16.256 5.632-30.528 15.552-41.344 28.48-0.128 0.128-0.32 0.32-0.512 0.512-3.392 4.096-6.528 8.64-9.152 13.312-17.92 19.264-46.272 19.776-48.256 19.776L624.256 484.992 620.48 484.992C612.544 484.608 593.28 481.6 575.808 462.4c-0.64-0.896-1.344-1.728-2.048-2.624C563.072 444.736 563.072 430.144 564.288 421.888l2.432-8.896C568.832 407.744 575.552 393.6 589.76 386.368c25.408-9.6 43.584-34.176 43.584-62.976C633.344 286.144 603.2 256 565.952 256 528.768 256 498.56 286.144 498.56 323.392c0 12.672 3.52 24.512 9.6 34.688 8.64 25.088 5.632 44.16 5.632 44.16s0 0.064-0.064 0.256L511.936 409.344C509.056 416.384 501.824 427.2 483.584 436.352 452.928 447.872 431.168 477.376 431.168 512c0 44.672 36.16 80.832 80.832 80.832 26.048 0 49.28-12.288 64-31.36 23.296-21.888 45.952-22.528 45.952-22.528l8.064 0c10.56 0.832 29.696 5.12 45.312 24.256 16.896 25.984 46.016 43.136 79.232 43.136 52.096 0 94.272-42.24 94.272-94.336 0-22.528-7.872-43.264-21.056-59.52-6.72-14.272-17.728-43.264-10.496-70.528 0.448-1.344 0.704-2.688 0.96-4.096l24.896-92.992c13.12-39.232 47.936-58.24 59.008-63.424 39.872-15.808 68.096-54.656 68.096-100.16 0-59.52-48.384-107.84-107.904-107.84-33.344 0-63.296 15.296-83.136 39.168l0.064-0.448c0 0-29.312 42.112-84.928 42.112l-201.6 0c-55.68-0.064-84.672-27.328-95.296-40.256C375.616 21.504 338.496 0 296.448 0 229.504 0 175.168 54.272 175.168 121.28c0 28.672 9.92 54.976 26.56 75.776 20.608 29.44 28.032 67.2 18.304 102.72C219.904 300.608 219.712 301.376 219.52 302.144L183.36 437.056C160.64 517.44 94.4 535.232 94.4 535.232l0.576 0.192C39.424 556.736 0 610.56 0 673.664c0 81.792 66.368 148.224 148.224 148.224 38.208 0 73.024-14.528 99.264-38.272 17.024-11.712 64.768-38.656 127.36-21.888 4.096 1.152 8.064 1.92 11.84 2.688l222.976 59.776c65.536 20.288 93.888 77.312 100.288 92.288C732.288 979.2 792.064 1024 862.336 1024 951.68 1024 1024 951.552 1024 862.336 1024 772.992 951.68 700.672 862.336 700.672z",task:"M638.4 407.104C603.072 371.968 557.184 354.432 510.848 354.432S418.688 371.968 383.36 407.104c-35.328 35.2-52.864 81.088-52.864 127.104 0 46.016 17.536 91.776 52.864 126.976 35.328 35.2 81.28 52.608 127.616 52.608 46.272 0 92.032-17.408 127.36-52.608 35.392-35.264 52.864-81.024 52.928-126.976C691.264 488 673.728 442.304 638.4 407.104zM613.248 470.848 527.488 549.76C527.232 550.016 526.848 550.144 526.592 550.4 519.296 558.144 507.584 560.896 497.088 555.84L399.744 508.608c-12.672-6.208-18.176-21.12-12.224-33.344 6.016-12.16 21.12-17.216 33.728-11.008l82.688 40.192 75.84-69.76c10.304-9.536 26.24-9.28 35.456 0.64C624.448 445.376 623.552 461.248 613.248 470.848zM512 64C264.64 64 64 264.576 64 512c0 247.36 200.64 448 448 448 247.424 0 448-200.64 448-448C960 264.576 759.424 64 512 64zM335.68 258.304c27.456 0 51.712 13.824 66.048 34.944C373.824 306.88 348.096 324.992 325.504 347.584 309.824 363.2 296.256 380.288 284.736 398.656 267.264 384.064 256 362.176 256 337.664 256 293.824 291.776 258.304 335.68 258.304zM675.264 697.984c-45.248 44.992-104.832 67.712-164.16 67.712L510.976 765.696 510.72 765.696c-59.328 0-118.912-22.656-164.16-67.712C301.248 652.8 278.464 593.344 278.592 534.272 278.464 491.712 290.304 448.896 313.856 411.52c9.28-14.592 20.032-28.352 32.704-41.024 18.496-18.304 39.232-33.024 61.44-43.904 32.384-15.872 67.648-23.936 102.656-23.936l0.192 0 0.192 0c36.8 0 73.92 8.832 107.456 26.304 20.416 10.496 39.68 24.384 56.768 41.472L675.264 370.432c13.12 13.12 24.256 27.392 33.536 42.432 22.848 37.12 34.56 79.296 34.432 121.344C743.36 593.344 720.512 652.8 675.264 697.984zM739.328 398.592c-11.456-18.24-25.024-35.456-40.704-51.072-22.656-22.528-48.32-40.64-76.224-54.336 14.336-21.056 38.528-34.88 65.984-34.88C732.352 258.304 768 293.76 768 337.664 768 362.112 756.8 384.064 739.328 398.592z"},svg:{baseSize:1024,default:"M290.306439 218.184864c0-2.815969-1.087988-90.495005 20.671773-117.438708 22.015758-27.519697 85.055064-63.039307 85.055064-63.039307s71.935209-44.735508 85.183063-36.671597C494.656191 8.971165 492.352216 95.626212 492.352216 95.626212s-0.639993 85.631058-14.52784 110.334786C464.000528 230.600727 392.00132 273.672253 392.00132 273.672253s-63.039307 41.151547-84.671069 40.319556C286.082485 313.223818 290.242439 221.192831 290.306439 218.184864zM334.145956 656.388043c0.511994 15.551829 77.055152 56.127383 77.055152 56.127383s75.263172 41.343545 103.358863 41.343545c28.351688 0 101.054888-41.599542 101.054888-41.599542s66.815265-34.815617 76.735156-54.015406c9.727893-18.943792-72.639201-60.415335-75.263172-61.887319C614.654871 594.948719 538.687706 551.173201 504.640081 556.805139 469.760465 562.693074 407.937145 600.132662 407.937145 600.132662S333.633962 640.900214 334.145956 656.388043zM302.722302 590.980763c21.631762 0.831991 84.607069-40.319556 84.607069-40.319556s71.935209-43.071526 85.823056-67.711255C487.040275 458.374222 487.744267 372.679164 487.744267 372.679164S489.856244 286.088117 476.608389 278.024205C463.296536 269.960294 391.361327 314.631803 391.361327 314.631803S328.450019 350.34341 306.306263 377.671109C284.610501 404.678812 285.63449 492.293848 285.63449 495.237816 285.506491 498.117784 281.474536 590.212771 302.722302 590.980763zM787.964964 353.415376c13.951847 24.639729 85.951055 67.711255 85.951055 67.711255s62.975307 41.215547 84.607069 40.319556c21.183767-0.831991 17.151811-92.798979 17.087812-95.742947 0-2.879968 1.215987-90.431005-20.607773-117.566707-22.143756-27.391699-85.119064-63.039307-85.119064-63.039307s-71.935209-44.735508-85.183063-36.607597c-13.375853 7.999912-11.199877 94.590959-11.199877 94.590959S774.269115 328.903646 787.964964 353.415376zM717.821736 377.671109c-22.207756-27.391699-85.119064-63.103306-85.119064-63.103306S560.767464 269.960294 547.45561 278.024205C534.207756 286.088117 536.255733 372.679164 536.255733 372.679164s0.831991 85.631058 14.655839 110.270787c13.887847 24.639729 85.759057 67.711255 85.759057 67.711255s63.103306 41.151547 84.671069 40.319556c21.247766-0.831991 17.151811-92.926978 17.023813-95.806946C738.36551 492.293848 739.517497 404.678812 717.821736 377.671109zM546.303623 205.960998c13.759849 24.639729 85.759057 67.711255 85.759057 67.711255s63.039307 41.151547 84.671069 40.319556c21.183767-0.767992 17.151811-92.798979 17.087812-95.806946 0-2.815969 1.023989-90.495005-20.671773-117.438708-22.079757-27.519697-85.119064-63.039307-85.119064-63.039307S556.031516-7.092658 542.783661 0.971253C529.407809 8.971165 531.647784 95.626212 531.647784 95.626212S532.351776 181.25727 546.303623 205.960998zM231.299088 630.532328c13.823848-24.703728 14.591839-110.334786 14.591839-110.334786s2.175976-86.591047-11.071878-94.718958C221.379197 417.478671 149.443988 462.15018 149.443988 462.15018S86.596679 497.733789 64.452923 525.189487c-21.759761 27.071702-20.735772 114.622739-20.735772 117.502707C43.653152 645.636162 39.685195 737.667149 60.804963 738.56314c21.695761 0.703992 84.671069-40.383556 84.671069-40.383556S217.47524 654.980059 231.299088 630.532328zM860.924162 727.939256c-2.431973-1.343985-78.335138-45.247502-112.510762-39.423566-34.751618 5.695937-96.638937 43.263524-96.638937 43.263524s-74.303183 40.703552-73.855188 56.255381c0.639993 15.48783 77.119152 56.127383 77.119152 56.127383s75.263172 41.343545 103.294864 41.343545c28.351688 0 101.118888-41.727541 101.118888-41.727541s66.815265-34.815617 76.671157-54.015406C945.979226 770.882784 863.676132 729.283242 860.924162 727.939256zM65.476912 461.446188c21.631762 0.831991 84.671069-40.319556 84.671069-40.319556S222.083189 378.119104 235.971036 353.415376c13.823848-24.57573 14.655839-110.398786 14.655839-110.398786S252.738852 156.553542 239.554997 148.48963C226.115145 140.425719 154.179936 185.161227 154.179936 185.161227S91.204629 220.744836 69.124872 248.136534C47.365111 275.272236 48.453099 362.823273 48.453099 365.703241 48.3251 368.647209 44.293145 460.678196 65.476912 461.446188zM980.282849 642.692194c0.063999-2.879968 1.087988-90.431005-20.671773-117.502707-22.079757-27.455698-85.119064-63.039307-85.119064-63.039307s-71.80721-44.671509-85.183063-36.671597c-13.247854 8.127911-11.199877 94.718958-11.199877 94.718958s0.831991 85.631058 14.655839 110.334786c13.823848 24.51173 85.759057 67.711255 85.759057 67.711255s63.039307 41.087548 84.735068 40.383556C984.506802 737.667149 980.346848 645.636162 980.282849 642.692194zM445.312734 796.6745c9.663894-18.879792-72.639201-60.351336-75.327171-61.82332-2.431973-1.343985-78.335138-45.183503-112.510762-39.487566-34.687618 5.823936-96.638937 43.263524-96.638937 43.263524s-74.239183 40.831551-73.727189 56.38338 77.055152 56.063383 77.055152 56.063383 75.135174 41.343545 103.422862 41.343545 101.054888-41.599542 101.054888-41.599542S435.328843 815.938288 445.312734 796.6745zM613.886879 866.433733c-2.431973-1.343985-78.271139-45.183503-112.446763-39.423566-34.815617 5.823936-96.766936 43.199525-96.766936 43.199525s-74.175184 40.89555-73.66319 56.447379c0.511994 15.551829 77.055152 56.063383 77.055152 56.063383S483.136318 1024 511.360007 1024s101.054888-41.599542 101.054888-41.599542 66.815265-34.815617 76.671157-54.015406C698.813945 909.44126 616.51085 867.841717 613.886879 866.433733z",parallel:"M76.79999999 273.06666667a34.13333333 34.13333333 0 0 1 34.13333334-34.13333334h819.2a34.13333333 34.13333333 0 0 1 0 68.26666667h-819.2a34.13333333 34.13333333 0 0 1-34.13333334-34.13333333z m0 204.8a34.13333333 34.13333333 0 0 1 34.13333334-34.13333334h819.2a34.13333333 34.13333333 0 0 1 0 68.26666667h-819.2a34.13333333 34.13333333 0 0 1-34.13333334-34.13333333z m0 204.8a34.13333333 34.13333333 0 0 1 34.13333334-34.13333334h819.2a34.13333333 34.13333333 0 0 1 0 68.26666667h-819.2a34.13333333 34.13333333 0 0 1-34.13333334-34.13333333z",root:"M725.333333 170.666667m-85.333333 0a85.333333 85.333333 0 1 0 170.666667 0 85.333333 85.333333 0 1 0-170.666667 0ZM673.152 468.010667a85.632 85.632 0 0 0 91.648 35.413333l141.482667-35.370667-20.608-82.773333-141.482667 35.370667-58.837333-88.192a85.76 85.76 0 0 0-54.272-36.437334l-164.096-32.853333a85.248 85.248 0 0 0-93.056 45.525333l-70.741334 141.482667 76.330667 38.186667 70.741333-141.525334 83.925334 16.810667L317.184 725.333333H128v85.333334h189.184c29.781333 0 57.813333-15.872 73.173333-41.429334l81.834667-136.362666 220.544 44.117333 77.482667 232.490667 80.896-27.008-77.44-232.448a85.632 85.632 0 0 0-64.256-56.746667l-129.664-25.898667 75.605333-126.037333 17.792 26.666667z",sequence:"M298.666667 512A42.666667 42.666667 0 0 1 341.333333 469.333333h238.364445L481.848889 371.484444a42.666667 42.666667 0 0 1 60.302222-60.302222l170.666667 170.666667a42.552889 42.552889 0 0 1 0 60.302222l-170.666667 170.666667a42.666667 42.666667 0 0 1-60.302222-60.302222l97.848889-97.848889H341.333333A42.666667 42.666667 0 0 1 298.666667 512zM42.666667 512a469.333333 469.333333 0 1 1 938.666666 0A469.333333 469.333333 0 0 1 42.666667 512zM512 128a384 384 0 1 0 0 768 384 384 0 0 0 0-768z",selector:"M512 992C246.903 992 32 777.097 32 512S246.903 32 512 32s480 214.903 480 480-214.903 480-480 480z m0-90c215.391 0 390-174.609 390-390S727.391 122 512 122 122 296.609 122 512s174.609 390 390 390z m8.32-663c49.92 0 90.624 13.056 121.344 40.704 30.72 26.88 46.08 63.744 46.08 110.592 0 38.4-9.984 69.888-28.416 94.464-6.912 7.68-29.184 28.416-66.048 60.672-13.824 11.52-23.808 24.576-30.72 38.4-7.68 15.36-11.52 31.488-11.52 49.92v10.752h-88.32v-10.752c0-29.184 4.608-54.528 15.36-75.264 9.984-20.736 39.936-52.992 89.856-97.536l9.216-10.752c13.824-16.896 20.736-35.328 20.736-54.528 0-25.344-7.68-45.312-21.504-59.904-14.592-14.592-35.328-21.504-61.44-21.504-33.792 0-57.6 9.984-72.192 31.488-13.056 17.664-19.2 43.008-19.2 75.264H336c0-56.832 16.128-101.376 49.92-133.632C418.944 255.128 463.488 239 520.32 239zM482 704h50c11.046 0 20 8.954 20 20v56c0 11.046-8.954 20-20 20h-50c-11.046 0-20-8.954-20-20v-56c0-11.046 8.954-20 20-20z",selector2:"M512 738.048a45.226667 45.226667 0 0 1-32.981333-14.122667L292.266667 537.130667c-18.858667-18.858667-18.858667-48.64 0-65.962667 18.816-17.237333 48.64-18.816 65.92 0L512 625.066667l153.813333-153.813334c18.858667-18.858667 48.64-18.858667 65.962667 0 17.237333 18.816 18.816 48.64 0 65.92l-186.794667 186.794667a45.226667 45.226667 0 0 1-32.981333 14.08zM512 738.048a46.250667 46.250667 0 0 1-47.104-47.104V333.056c0-26.666667 20.437333-47.104 47.104-47.104 26.666667 0 47.104 20.437333 47.104 47.104v357.888c0 26.666667-20.437333 47.104-47.104 47.104zM512 981.333333C253.013333 981.333333 42.666667 770.986667 42.666667 512S253.013333 42.666667 512 42.666667s469.333333 210.346667 469.333333 469.333333-210.346667 469.333333-469.333333 469.333333z m0-844.501333A375.125333 375.125333 0 0 0 136.832 512 375.125333 375.125333 0 0 0 512 887.168 375.125333 375.125333 0 0 0 887.168 512 375.125333 375.125333 0 0 0 512 136.832z",condition:"M512 600.436364L0 344.436364l512-256 512 256-512 256zM102.4 344.436364l409.6 200.145454 409.6-200.145454L512 144.290909 102.4 344.436364zM488.727273 572.509091h46.545454v167.563636h-46.545454zM642.327273 968.145455H381.672727v-232.727273h260.654546v232.727273z m-214.109091-46.545455h167.563636v-139.636364H428.218182v139.636364zM930.909091 344.436364h46.545454v279.272727h-46.545454zM884.363636 614.4h139.636364v139.636364h-139.636364z",decorator:"M177.504 663.904L512 825.184l334.496-161.28a25.6 25.6 0 0 1 22.368 46.016l-0.128 0.064-345.6 166.72a25.568 25.568 0 0 1-22.368-0.064l0.16 0.064-345.6-166.656a25.632 25.632 0 1 1 22.368-46.016l-0.128-0.064zM512 659.104l334.496-161.28a25.6 25.6 0 0 1 22.368 46.016l-0.128 0.064-345.6 166.72a25.568 25.568 0 0 1-22.368-0.064l0.16 0.064-345.6-166.72a25.632 25.632 0 0 1 22.368-46.016l-0.16-0.064 334.496 161.28z m-11.072-493.056a25.184 25.184 0 0 1 22.272 0.064l-0.16-0.064 345.6 165.568a25.6 25.6 0 0 1 0.192 46.112l-0.16 0.064-345.6 166.656a25.568 25.568 0 0 1-22.368-0.064l0.16 0.064-345.6-166.656a25.6 25.6 0 0 1-0.096-46.112l0.16-0.064 345.6-165.568zM512 217.6l-286.528 137.216L512 493.056l286.528-138.24L512 217.6z",service:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27c40.9 17.3 77.7 42.1 109.3 73.8 9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47c-5.3 4.1-3.5 12.5 3 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l0.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8c-0.1 4.5 3.5 8.2 8 8.2h60c4.4 0 7.9-3.5 8-7.8zM924 512h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4S687 811.7 646 829c-42.4 17.9-87.4 27-133.9 27s-91.5-9.1-133.9-27c-40.9-17.3-77.7-42.1-109.3-73.8-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47c5.3-4.1 3.5-12.5-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-0.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8 0.1-4.5-3.5-8.2-8-8.2z",task:"M540.372 967.616h-53.405c-2.978-0.51-5.944-1.106-8.936-1.519-18.402-2.54-37.033-3.958-55.177-7.729-101.003-20.992-185.569-70.581-253.059-148.556-55.014-63.561-89.631-137.056-103.484-220.088-2.73-16.361-4.419-32.897-6.588-49.354v-53.405c0.512-2.968 1.104-5.923 1.522-8.904 2.618-18.666 4.142-37.557 7.967-55.972 20.99-101.05 70.868-185.447 148.918-252.816 63.409-54.729 136.709-89.16 219.45-102.96 16.373-2.73 32.92-4.42 49.387-6.591h53.405c2.979 0.51 5.944 1.106 8.937 1.519 18.402 2.539 37.036 3.956 55.182 7.729 101.008 21 185.58 70.588 253.068 148.576 55.011 63.571 89.645 137.062 103.475 220.109 2.724 16.349 4.415 32.87 6.583 49.312v53.405c-0.51 2.952-1.101 5.894-1.516 8.858-2.616 18.668-4.138 37.562-7.962 55.977-20.982 101.064-70.863 185.471-148.914 252.847-63.41 54.737-136.715 89.172-219.462 102.97-16.375 2.73-32.923 4.421-49.391 6.592z m-30.052-69.951c215.031 0.01 388.86-173.444 388.99-388.152 0.132-215.431-173.429-389.604-388.382-389.751-214.789-0.148-389.424 173.768-389.496 387.891-0.071 216.118 173.314 390.003 388.888 390.012zM364.733 514.519c0-46.707 1.067-93.448-0.35-140.113-1.065-35.096 35.233-62.407 71.896-41.037 82 47.797 164.361 94.974 246.529 142.481 29.326 16.955 29.33 61.196-0.038 78.191-82.149 47.542-164.331 95.027-246.59 142.38-29.208 16.813-62.016 4.528-70.013-26.088-1.31-5.012-1.365-10.449-1.375-15.69-0.1-46.707-0.059-93.415-0.059-140.124z",arrow_right_down:"M892.586667 282.453333a42.666667 42.666667 0 0 0-8.96-14.08l-128-128a42.666667 42.666667 0 0 0-60.586667 60.586667L750.506667 256H384a128 128 0 0 0-128 128v366.506667l-55.04-55.466667a42.666667 42.666667 0 0 0-60.586667 60.586667l128 128a42.666667 42.666667 0 0 0 14.08 8.96 40.106667 40.106667 0 0 0 32.426667 0 42.666667 42.666667 0 0 0 14.08-8.96l128-128a42.666667 42.666667 0 0 0-60.586667-60.586667L341.333333 750.506667V384a42.666667 42.666667 0 0 1 42.666667-42.666667h366.506667l-55.466667 55.04a42.666667 42.666667 0 0 0 0 60.586667 42.666667 42.666667 0 0 0 60.586667 0l128-128a42.666667 42.666667 0 0 0 8.96-14.08 42.666667 42.666667 0 0 0 0-32.426667z",arrow_bar_right:"M853.333333 554.666667H426.666667c-25.6 0-42.666667-17.066667-42.666667-42.666667s17.066667-42.666667 42.666667-42.666667h426.666666c25.6 0 42.666667 17.066667 42.666667 42.666667s-17.066667 42.666667-42.666667 42.666667zM682.666667 725.333333c-12.8 0-21.333333-4.266667-29.866667-12.8-17.066667-17.066667-17.066667-42.666667 0-59.733333l170.666667-170.666667c17.066667-17.066667 42.666667-17.066667 59.733333 0s17.066667 42.666667 0 59.733334l-170.666667 170.666666c-8.533333 8.533333-17.066667 12.8-29.866666 12.8zM853.333333 554.666667c-12.8 0-21.333333-4.266667-29.866666-12.8l-170.666667-170.666667c-17.066667-17.066667-17.066667-42.666667 0-59.733333s42.666667-17.066667 59.733333 0l170.666667 170.666666c17.066667 17.066667 17.066667 42.666667 0 59.733334-8.533333 8.533333-17.066667 12.8-29.866667 12.8zM170.666667 896c-25.6 0-42.666667-17.066667-42.666667-42.666667V170.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666666 42.666667v682.666666c0 25.6-17.066667 42.666667-42.666666 42.666667z",arrow_bar_down:"M512 384a42.666667 42.666667 0 0 1 42.666667 42.666667v426.666666a42.666667 42.666667 0 1 1-85.333334 0V426.666667a42.666667 42.666667 0 0 1 42.666667-42.666667zM712.832 652.501333a42.666667 42.666667 0 0 1 0 60.330667l-170.666667 170.666667a42.666667 42.666667 0 0 1-60.330666-60.330667l170.666666-170.666667a42.666667 42.666667 0 0 1 60.330667 0zM311.168 652.501333a42.666667 42.666667 0 0 1 60.330667 0l170.666666 170.666667a42.666667 42.666667 0 0 1-60.330666 60.330667l-170.666667-170.666667a42.666667 42.666667 0 0 1 0-60.330667zM128 170.666667a42.666667 42.666667 0 0 1 42.666667-42.666667h682.666666a42.666667 42.666667 0 1 1 0 85.333333H170.666667a42.666667 42.666667 0 0 1-42.666667-42.666666z"},createTag:function(){var e=I.a.time().substr(-6).toUpperCase();return e}};if(!D.layout.vertical){var R=D.node.childSpace.vertical;D.node.childSpace.vertical=D.node.childSpace.horizonal,D.node.childSpace.horizonal=R}for(var L=D,Z=(n("2397"),n("4f7f"),n("6c7b"),n("45eb")),B=n("262e"),P=n("99de"),N=n("7e84"),E={node:{uuid:"",name:""},component:{uuid:"",name:""},method:"",data:""},W=E,U=(n("6762"),n("53ca")),F=(n("34ef"),n("b562")),J=n("f64c"),_=n.n(J),H=n("2ef0"),V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$=new Uint8Array(256),q=0;q<V.length;q++)$[V.charCodeAt(q)]=q;var K={lodash:H,common:{isString:function(e){return"string"===typeof e},isBoolean:function(e){return"boolean"===typeof e},isNumber:function(e){return"number"===typeof e},typeOf:function(e){var t=Object(U["a"])(e);if("object"===t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"===n)return"object";if("[object Array]"===n||"number"===typeof e.length&&"undefined"!==typeof e.splice&&"undefined"!==typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"===n||"undefined"!==typeof e.call&&"undefined"!==typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"===t&&"undefined"===typeof e.call)return"object";return t},isNull:function(e){return null==e},isDefAndNotNull:function(e){return null!=e},isArray:function(e){return"array"===K.common.typeOf(e)},isArrayLike:function(e){var t=K.common.typeOf(e);return"array"===t||"object"===t&&"number"===typeof e.length},isFunction:function(e){return"function"===K.common.typeOf(e)},isObject:function(e){var t=Object(U["a"])(e);return"object"===t&&null!=e||"function"===t},string2ArrayBuffer:function(e){return F["a"](e)},trimString:function(e){return H.trim(e)},hashString:function(e){if(!K.common.isString(e))return null;var t=K.common.trimString(e);return 0===t.length?null:_()(t)},clone:function(e){return H.cloneDeep(e)},convertObject:function(e,t){if(K.common.isObject(e)&&K.common.isObject(t)){var n=["tooltip"];for(var i in e)if(t.hasOwnProperty(i)){var o=e[i],r=t[i];K.common.isObject(o)&&K.common.isObject(r)?K.common.convertObject(o,r):Object(U["a"])(o)!=Object(U["a"])(r)?"default"==i?o&&r&&(e[i]=r):e[i]=r:n.includes(i)&&(e[i]=r)}else delete e[i];for(var a in t)if(e.hasOwnProperty(a)){var s=e[a],c=t[a];K.common.isObject(s)&&K.common.isObject(c)&&K.common.convertObject(s,c)}else e[a]=t[a]}},currentDateString:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new Date,n=[t.getFullYear(),t.getMonth()+1,t.getDate()];return e&&(n=n.concat([t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()])),n.join("-")},extend:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if("function"===typeof Object.assign)Object.assign.apply(Object,[e].concat(n));else{var o,r=n.shift();for(var a in r)e[a]=r[a];if(n.length)(o=K.common).extend.apply(o,[e].concat(n))}return e},def:function(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})},removeArray:function(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}},base64:{encodeBuffer:function(e){for(var t=new Uint8Array(e),n=t.length,i="",o=0;o<n;o+=3)i+=V[t[o]>>2],i+=V[(3&t[o])<<4|t[o+1]>>4],i+=V[(15&t[o+1])<<2|t[o+2]>>6],i+=V[63&t[o+2]];return n%3===2?i=i.substring(0,i.length-1)+"=":n%3===1&&(i=i.substring(0,i.length-2)+"=="),i},decodeBuffer:function(e){var t=.75*e.length,n=e.length;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);for(var i,o,r,a,s=new ArrayBuffer(t),c=new Uint8Array(s),l=0,h=0;l<n;l+=4)i=$[e.charCodeAt(l)],o=$[e.charCodeAt(l+1)],r=$[e.charCodeAt(l+2)],a=$[e.charCodeAt(l+3)],c[h++]=i<<2|o>>4,c[h++]=(15&o)<<4|r>>2,c[h++]=(3&r)<<6|63&a;return s}}},G=K;function X(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Y(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function Y(e,t){if(e){if("string"===typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ee=function(){function e(t){var n=this;Object(O["a"])(this,e),this.config=G.lodash.merge({width:L.node.minWidth,height:L.node.minHeight,fill:"#ffffff",stroke:"#000000",strokeWidth:1,dragDistance:L.node.dragDistance,type:"node",names:{node:!0},canClose:!0,canOrder:!0,canMove:!1},t),this.config.uid=I()(),this.config.names[this.config.type]=!0,this.isSelected=!1,this.root=new T.a.Group({x:this.config.x,y:this.config.y,draggable:!1,dragDistance:this.config.dragDistance,name:Object.keys(this.config.names).join(" "),id:this.config.uid}),this.root.setAttr("@node",this),this.background=this.createBackground(),this.root.add(this.background),this.config.canClose&&(this.close=this.createCloseButton({size:10,uid:this.config.uid,action:function(){var e=n.stage();e&&e.isReadOnly()||(n.destroy(),e&&(e.updateOrder(),e.setModify(!0)))}}),this.root.add(this.close)),this.createBody(),this.adjust()}return Object(S["a"])(e,[{key:"createBackground",value:function(){return new T.a.Rect({x:0,y:0,width:this.config.width,height:this.config.height,draggable:!1,fill:this.config.fill,stroke:this.config.stroke,strokeWidth:this.config.strokeWidth})}},{key:"createBody",value:function(){this.body=new T.a.Group({x:0,y:0,name:"node-body"}),this.root.add(this.body)}},{key:"parent",value:function(){var e=this.root.getParent();while(e){if(e.hasName("node"))break;e=e.getParent()}return e?e.getAttr("@node"):null}},{key:"hasParent",value:function(e){var t=this.parent();while(t&&t!==e)t=t.parent();return t===e}},{key:"remove",value:function(){}},{key:"destroy",value:function(){this.root.destroy()}},{key:"createCloseButton",value:function(e){var t=G.lodash.merge({x:0,y:0,size:10,background:"transparent",stroke:"#ddd",strokeWidth:2,lineCap:"round",lineJoin:"round"},e),n=new T.a.Group({x:t.x,y:t.y,rotation:45,name:"node-close"}),i=new T.a.Circle({x:0,y:0,radius:t.size/2,fill:t.background,stroke:t.background});n.add(i);var o=t.size/2-2,r=new T.a.Line({points:[-o,0,o,0],stroke:t.stroke,strokeWidth:t.strokeWidth,lineCap:"round",lineJoin:"round"});n.add(r);var a=new T.a.Line({points:[0,-o,0,o],stroke:t.stroke,strokeWidth:t.strokeWidth,lineCap:"round",lineJoin:"round"});return n.add(a),n.on("mousedown",(function(){t.action&&t.action()})),n.on("mouseout",(function(){a.setAttr("stroke",t.stroke),r.setAttr("stroke",t.stroke),this.getLayer().draw()})),n.on("mouseover",(function(){a.setAttr("stroke","#FF3030"),r.setAttr("stroke","#FF3030"),this.getLayer().draw()})),n}},{key:"resizeWidth",value:function(e){if(e&&this.background.width(e),this.close){var t=this.background.width(),n=this.close.getClientRect();this.close.position({x:t-n.width/2,y:n.height/2})}}},{key:"adjust",value:function(e){var t=L.node.minWidth,n=this.body.getClientRect({skipTransform:!0});t=Math.max(t,n.width),this.resizeWidth(t),this.background.height(n.height+8)}},{key:"selected",value:function(e){this.isSelected=e,this.background.strokeWidth(this.isSelected?2:1),this.background.stroke(this.isSelected?L.node.highlight:this.config.stroke)}},{key:"refresh",value:function(){this.root.getLayer().draw()}},{key:"nodeType",value:function(){return this.config.type}},{key:"isType",value:function(e){return this.root.hasName(e)}},{key:"level",value:function(){var e=0,t=this.parent();while(t)e+=1,t=t.parent();return e}},{key:"toJson",value:function(){return{type:this.config.type,config:this.config}}},{key:"serialize",value:function(){return{type:this.config.type,config:this.exportConfig()}}},{key:"removeKey",value:function(e,t){if("undefined"!=typeof t[e])if("events"==e){var n=t[e];for(var i in n){var o=n[i],r=G.lodash.isEqual(W,o);r?delete n[i]:(o.node&&o.node.path&&delete o.node["uuid"],o.data||delete o["data"])}}else if("properties"==e){var a=t[e];for(var s in a){var c=a[s];"cc.Node"==c.TYPE&&c.path&&delete c["default"]}}else delete t[e]}},{key:"exportConfig",value:function(){var e=this,t=G.common.clone(this.config),n=["events","properties","uid","width","height","fill","stroke","strokeWidth","dragDistance","canClose","canOrder","canMove","acceptDecorator","acceptService","acceptChild","names","canDrop","icon","subtitles","acceptTypes"],i=["events","properties","fill","icon","subtitles"];return n.forEach((function(n){e.removeKey(n,t)})),t.label&&(i.forEach((function(n){e.removeKey(n,t.label)})),this.title&&(t.label.order=this.title.config.order)),t}},{key:"exportTargetUUID",value:function(e){if(!e)return null;var t=new Set,n=e["events"]||{};for(var i in n){var o=n[i];o.node&&o.node.uuid&&t.add(o.node.uuid)}var r=e["properties"]||{};for(var a in r){var s=r[a];"cc.Node"==s.TYPE&&s.default&&t.add(s.default)}return t}},{key:"exportTargetUUIDs",value:function(){var e=this.exportTargetUUID(this.config),t=this.exportTargetUUID(this.config.label),n=[];if(e&&t){var i,o=new Set(e),r=X(t);try{for(r.s();!(i=r.n()).done;){var a=i.value;o.add(a)}}catch(s){r.e(s)}finally{r.f()}n=Array.from(o)}else e?n=Array.from(e):t&&(n=Array.from(t));return n}},{key:"serializeTargetUUIDs",value:function(){return this.exportTargetUUIDs()}},{key:"canMove",value:function(){return this.config.canMove}},{key:"canAcceptChild",value:function(){return this.config.acceptChild}},{key:"isVisible",value:function(){return this.root.visible()}},{key:"knode",value:function(){return this.root}},{key:"stage",value:function(){var e=this.root.getStage();return e?e.getAttr("@stage"):null}},{key:"position",value:function(){return this.root.position()}},{key:"size",value:function(){return this.background.size()}},{key:"id",value:function(){return this.root.id()}},{key:"visible",value:function(e){return this.root.visible(e)}},{key:"getOptions",value:function(){var e=this.config.label||this.config||{};return e}},{key:"refreshComponent",value:function(e,t){if("function"==typeof e&&"function"==typeof t){var n=this.getOptions(),i=e(n.uuid);i&&(t(n.properties,i.properties),t(n.events,i.events))}}}]),e}(),te=ee;function ne(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ie(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function ie(e,t){if(e){if("string"===typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oe(e,t):void 0}}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function re(e){var t=ae();return function(){var n,i=Object(N["a"])(e);if(t){var o=Object(N["a"])(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Object(P["a"])(this,n)}}function ae(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var se=function(e){Object(B["a"])(n,e);var t=re(n);function n(e){var i;Object(O["a"])(this,n),i=t.call(this,j["a"].Utils.lodash.merge({fill:"#5F5F5F",canClose:!1,canMove:!0,canDrop:!1,type:"label",tag:"",names:{label:!0},icon:"default",title:"",subtitles:[],order:-1,events:{}},e)),i.config.tag||(i.config.tag=L.createTag());var o=i.background.width();return i.isDropping=!1,i.config.canDrop&&(i.dropZone=i.createDropZone({x:0,y:-L.label.dropHeight-2,width:o,height:L.label.dropHeight}),i.dropZone.visible(!1),i.root.add(i.dropZone)),i}return Object(S["a"])(n,[{key:"createDropZone",value:function(e){var t=new T.a.Rect({x:e.x,y:e.y,width:e.width,height:e.height,fill:L.zone.highlight});return t}},{key:"createBody",value:function(){Object(Z["a"])(Object(N["a"])(n.prototype),"createBody",this).call(this);var e=L.svg[this.config.icon];e||(e=L.svg.default);var t=new T.a.Path({x:4,y:4,data:e,fill:"#dddddd",draggable:!1});t.scaleX(1*L.label.iconSize/L.svg.baseSize),t.scaleY(1*L.label.iconSize/L.svg.baseSize),this.body.add(t),this.title=new T.a.Text({x:32,y:8,text:this.config.title,fontSize:L.label.fontSize,fill:"#fff",draggable:!1}),this.body.add(this.title);var i=L.label.space+L.label.iconSize;0===this.config.subtitles.length&&this.config.subtitles.push(this.config.type),this.subtitles=[];var o,r=ne(this.config.subtitles);try{for(r.s();!(o=r.n()).done;){var a=o.value,s=this.createSubtitle({x:6,y:i,text:a});this.subtitles.push(s),this.body.add(s),i+=12+L.label.space}}catch(c){r.e(c)}finally{r.f()}this.root.add(this.body),this.orderZone=this.createOrder({y:4,number:this.config.order}),this.root.add(this.orderZone)}},{key:"createOrder",value:function(e){var t=j["a"].Utils.lodash.merge({x:0,y:0,size:18,background:"#fff",stroke:"#666",strokeWidth:2,lineCap:"round",lineJoin:"round",number:-1},e),n=new T.a.Group({x:t.x-6,y:t.y,name:"label-order",visible:t.number>=-1}),i=new T.a.Circle({x:0,y:0,radius:t.size/2,fill:t.background,stroke:t.stroke,strokeWidth:1});n.add(i);var o=new T.a.Text({x:0,y:-L.label.orderFontSize/2+1,text:t.number,fontSize:L.label.orderFontSize,fill:t.stroke,draggable:!1});return o.offsetX(o.width()/2),n.add(o),n.on("mouseout",(function(){i.setAttr("fill",t.background),o.setAttr("fill",t.stroke),this.getLayer().draw()})),n.on("mouseover",(function(){i.setAttr("fill","#FF3030"),o.setAttr("fill","#FFC125"),this.getLayer().draw()})),n.setNumber=function(e){o.visible(e>=-1),o.text(""+e),o.offsetX(o.width()/2)},n}},{key:"createSubtitle",value:function(e){return new T.a.Text({x:e.x,y:e.y,text:e.text,fontSize:L.label.subFontSize,fill:"#fff",draggable:!1})}},{key:"order",value:function(e){if(null==e)return this.config.order;this.config.order=e,this.orderZone.setNumber(e)}},{key:"getTitle",value:function(){return this.config.title}},{key:"setTitle",value:function(e){e||(e=""),this.config.title!==e&&(this.config.title=e,this.title.text(e),this.adjust())}},{key:"getTag",value:function(){return this.config.tag}},{key:"setTag",value:function(e){e||(e=""),this.config.tag!==e&&(this.config.tag=e)}},{key:"refreshTag",value:function(){var e=L.createTag();return this.setTag(e),e}},{key:"getScript",value:function(){return this.config.script}},{key:"getScriptParameters",value:function(){return!this.config.parameters&&(this.config.parameters=[]),this.config.parameters}},{key:"setScript",value:function(e,t){e||(e=""),this.config.script!==e&&(this.config.script=e),j["a"].Utils.common.isArray(t)?this.config.parameters=[].concat(t):t=[]}},{key:"getInvert",value:function(){return this.config.invert}},{key:"setInvert",value:function(e){null==e&&(e=!1),this.config.invert!==e&&(this.config.invert=e)}},{key:"getSubtitles",value:function(){return this.config.subtitles}},{key:"setSubtitles",value:function(e){this.config.subtitles=[].concat(e);for(var t=L.label.space+L.label.iconSize,n=0;n<this.config.subtitles.length;n++){var i=this.config.subtitles[n],o=this.subtitles[n];o?(o.text(i),o.y(t)):(o=this.createSubtitle({x:6,y:t,text:i}),this.subtitles.push(o),this.body.add(o)),t+=12+L.label.space}if(this.subtitles.length>this.config.subtitles.length){var r=this.subtitles.splice(this.config.subtitles.length,this.subtitles.length-this.config.subtitles.length);r.forEach((function(e){e.destroy()}))}this.adjust()}},{key:"canDrop",value:function(e){return this.config.acceptTypes.indexOf(e)>=0}},{key:"setDropping",value:function(e){this.config.canDrop&&(this.isDropping=e,this.dropZone.visible(this.isDropping),this.refresh())}},{key:"clientHeight",value:function(){return this.background.height()}},{key:"clientWidth",value:function(){return this.background.width()}},{key:"resizeWidth",value:function(e){Object(Z["a"])(Object(N["a"])(n.prototype),"resizeWidth",this).call(this,e),e&&this.dropZone&&this.dropZone.width(e)}},{key:"adjust",value:function(e){var t=L.node.minWidth,n=this.body.getClientRect({skipTransform:!0});t=Math.max(t,n.width+24),this.resizeWidth(t),this.background.height(n.height+8)}}]),n}(te),ce=se;function le(e){var t=he();return function(){var n,i=Object(N["a"])(e);if(t){var o=Object(N["a"])(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Object(P["a"])(this,n)}}function he(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var ue=function(e){Object(B["a"])(n,e);var t=le(n);function n(e){return Object(O["a"])(this,n),e.fill=L.fills["decorator"],e.isCondition&&(e.icon="condition",e.subtitles=["condition"]),t.call(this,j["a"].Utils.lodash.merge({fill:L.fills.decorator,type:"decorator",names:{accessory:!0},canClose:!0,canMove:!0,canDrop:!0,icon:"decorator",subtitles:["decorator"],acceptTypes:["decorator"]},e))}return Object(S["a"])(n,[{key:"destroy",value:function(){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e){var t=this.parent();t&&t.removeDecorator(this)}if(this.root.destroy(),e){var n=this.stage();n&&n.snapshot()}}}]),n}(ce),de=ue;function fe(e){var t=ve();return function(){var n,i=Object(N["a"])(e);if(t){var o=Object(N["a"])(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Object(P["a"])(this,n)}}function ve(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var pe=function(e){Object(B["a"])(n,e);var t=fe(n);function n(e){return Object(O["a"])(this,n),e.fill=L.fills["service"],t.call(this,j["a"].Utils.lodash.merge({fill:L.fills.service,type:"service",names:{accessory:!0},canClose:!0,canMove:!0,canDrop:!0,icon:"service",acceptTypes:["service"]},e))}return Object(S["a"])(n,[{key:"destroy",value:function(){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e){var t=this.parent();t&&t.removeService(this)}if(this.root.destroy(),e){var n=this.stage();n&&n.snapshot()}}}]),n}(ce),ge=pe;function ye(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=me(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function me(e,t){if(e){if("string"===typeof e)return be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?be(e,t):void 0}}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ke(e){var t=we();return function(){var n,i=Object(N["a"])(e);if(t){var o=Object(N["a"])(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Object(P["a"])(this,n)}}function we(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Ce=function(e){Object(B["a"])(n,e);var t=ke(n);function n(e){var i;return Object(O["a"])(this,n),i=t.call(this,j["a"].Utils.lodash.merge({acceptDecorator:!0,acceptService:!0,acceptChild:!0,fill:"#3E4043",stroke:"#303053",label:{tag:"",events:{}},type:"entity",names:{entity:!0},canMove:!0},e)),i.config.label.tag||(i.config.label.tag=L.createTag()),i}return Object(S["a"])(n,[{key:"createBackground",value:function(){return new T.a.Rect({x:0,y:0,width:this.config.width,height:this.config.height,draggable:!1,fill:this.config.fill,stroke:this.config.stroke,strokeWidth:this.config.strokeWidth,cornerRadius:4,shadowColor:"black",shadowBlur:10,shadowOffset:{x:4,y:4},shadowOpacity:.6})}},{key:"createBody",value:function(){if(Object(Z["a"])(Object(N["a"])(n.prototype),"createBody",this).call(this),this.body.x(L.node.margin),this.decorators=[],this.services=[],this.children=[],this.config.acceptChild){var e=this.background.width(),t=this.background.height();this.childZone=new T.a.Group({x:L.layout.vertical?0:e+L.node.childSpace.horizonal,y:L.layout.vertical?t+L.node.childSpace.vertical:t/2}),this.root.add(this.childZone),this.childZoneMarker=new T.a.Rect({x:0,y:0,width:L.layout.vertical?8:0,height:L.layout.vertical?0:8,fill:L.zone.highlight,visible:!1}),this.childZone.add(this.childZoneMarker),this.links=[],this.linkZone=new T.a.Group({x:L.layout.vertical?e/2:e,y:L.layout.vertical?t:t/2}),this.root.add(this.linkZone),this.childZoneLink=new T.a.Arrow({x:0,y:0,points:[0,0,25,0,L.node.childSpace.horizonal,0],pointerLength:8,pointerWidth:8,fill:L.zone.highlight,stroke:L.zone.highlight,strokeWidth:2,tension:0,visible:!1}),this.linkZone.add(this.childZoneLink),this.isExpanding=!0,this.expand=this.createExpandButton({size:12,action:this.toggleExpand.bind(this)}),this.root.add(this.expand)}if(this.config.acceptDecorator&&(this.decoratorZone=this.createDropZone({x:L.zone.padding,y:2,acceptTypes:["decorator"],fill:L.fills.decorator}),this.body.add(this.decoratorZone)),this.config.decorators){var i,o=ye(this.config.decorators);try{for(o.s();!(i=o.n()).done;){var r=i.value;this.addDecorator(r)}}catch(l){o.e(l)}finally{o.f()}}if(this.title=new ce(j["a"].Utils.lodash.merge({canMove:!1,names:{entitylabel:!0}},this.config.label)),this.body.add(this.title.knode()),(this.config.acceptService||"root"==this.config.type)&&(this.serviceZone=this.createDropZone({x:L.zone.padding,y:this.config.height-L.zone.height-2,acceptTypes:["service"],fill:L.fills.service}),this.body.add(this.serviceZone)),this.config.services){var a,s=ye(this.config.services);try{for(s.s();!(a=s.n()).done;){var c=a.value;this.addService(c)}}catch(l){s.e(l)}finally{s.f()}}}},{key:"createDropZone",value:function(e){var t=new T.a.Rect({name:"dropzone",x:e.x,y:e.y,width:L.zone.fixedWidth,height:L.zone.height,fill:e.fill||L.zone.fill,stroke:L.zone.fill,strokeWidth:1});return t.setAttr("@types",e.acceptTypes),t.canDrop=function(e){var n=t.getAttr("@types");return n.indexOf(e)>=0},t.setDropping=function(n){t.setAttr("fill",n?L.zone.highlight:e.fill||L.zone.fill),t.getLayer().draw()},t}},{key:"setChildDropping",value:function(e){if(this.config.acceptChild){if(e<0)this.childZoneMarker.hide(),this.childZoneLink.hide();else{if(this.children.length>0){var t=e>=this.children.length?this.children.length-1:e,n=this.children[t];e>=this.children.length?this.childZoneMarker.x(n.position().x+n.size().width+(L.node.childSpace.horizonal-8)/2):this.childZoneMarker.x(n.position().x-(L.node.childSpace.horizonal+8)/2),this.childZoneMarker.height(n.size().height)}else this.childZoneMarker.x(-this.childZoneMarker.width()/2),this.childZoneMarker.height(L.node.minHeight);this.childZoneMarker.show();var i=this.childZoneMarker.x()+this.childZoneMarker.width()/2,o=L.node.childSpace.vertical,r=4*i/4,a=0;this.childZoneLink.points([0,0,r,a,i,o]),this.childZoneLink.show()}this.refresh()}}},{key:"createExpandButton",value:function(e){var t=j["a"].Utils.lodash.merge({x:0,y:0,size:12,background:"#ddd",stroke:"#333",strokeWidth:2,lineCap:"round",lineJoin:"round",isExpanding:!0},e),n=new T.a.Group({x:t.x,y:t.y,name:"node-expand"}),i=new T.a.Circle({x:0,y:0,radius:t.size/2,fill:t.background,stroke:t.stroke,strokeWidth:1});n.add(i);var o=t.size/2-3,r=new T.a.Line({points:[-o,0,o,0],stroke:t.stroke,strokeWidth:t.strokeWidth,lineCap:"round",lineJoin:"round"});n.add(r);var a=new T.a.Line({points:[0,-o,0,o],stroke:t.stroke,strokeWidth:t.strokeWidth,lineCap:"round",lineJoin:"round",visible:!t.isExpanding});return n.add(a),n.on("mousedown",(function(e){t.action(),e.evt.preventDefault()})),n.on("mouseout",(function(){a.setAttr("stroke",t.stroke),r.setAttr("stroke",t.stroke),this.getLayer().draw()})),n.on("mouseover",(function(){a.setAttr("stroke","#FF3030"),r.setAttr("stroke","#FF3030"),this.getLayer().draw()})),n.setExpand=function(e){a.visible(!e),this.getLayer().draw()},n}},{key:"addDecorator",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=new de(e);return this.body.add(i.knode()),t<0||t>this.decorators.length?this.decorators.push(i):this.decorators.splice(t,0,i),n&&(this.adjust({downward:!0,upward:!0}),this.refresh()),i}},{key:"addService",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=new ge(e);return this.body.add(i.knode()),t<0||t>this.services.length?this.services.push(i):this.services.splice(t,0,i),n&&(this.adjust({downward:!0,upward:!0}),this.refresh()),i}},{key:"computeValidIndex",value:function(e,t,n){return 0===n?-1:1===n?0:t<0||t>=n?n-1:(t===e+1&&t--,t)}},{key:"insertElement",value:function(e,t){var n=e.nodeType();"decorator"===n?this.insertDecorator(e,t):"service"===n?this.insertService(e,t):j["a"].Logger.error("BTEntityNode::insertElement failed - unknown element type: ".concat(n))}},{key:"insertDecorator",value:function(e,t){if(e){var n=e.parent();if(n===this){var i=this.decorators.indexOf(e),o=this.computeValidIndex(i,t,this.decorators.length);if(o>=0&&i!==o){var r=[this.decorators[o],this.decorators[i]];this.decorators[i]=r[0],this.decorators[o]=r[1]}this.adjust()}else n.removeDecorator(e),this.body.add(e.knode()),this.decorators.splice(t,0,e),this.adjust({downward:!0,upward:!0})}else j["a"].Logger.error("BTEntityNode::insertDecorator failed -  dec is null")}},{key:"removeDecorator",value:function(e){if(e){var t=this.decorators.indexOf(e);this.decorators.splice(t,1),e.knode().remove(),this.adjust({downward:!0,upward:!0})}}},{key:"insertService",value:function(e,t){if(e){var n=e.parent();if(n===this){var i=this.services.indexOf(e),o=this.computeValidIndex(i,t,this.services.length);if(o>=0&&i!==o){var r=[this.services[o],this.services[i]];this.services[i]=r[0],this.services[o]=r[1]}this.adjust()}else n.removeService(e),this.body.add(e.knode()),this.services.splice(t,0,e),this.adjust({downward:!0,upward:!0})}else j["a"].Logger.error("BTEntityNode::insertService failed -  ser is null")}},{key:"removeService",value:function(e){if(e){var t=this.services.indexOf(e);this.services.splice(t,1),e.knode().remove(),this.adjust({downward:!0,upward:!0})}}},{key:"insertChild",value:function(e,t){if(e){var n=e.parent();if(n===this){var i=this.children.indexOf(e),o=this.computeValidIndex(i,t,this.children.length);if(o>=0&&i!==o){var r=[this.children[o],this.children[i]];this.children[i]=r[0],this.children[o]=r[1]}this.adjust()}else n.removeChild(e),this.expandChildren(!0),this.childZone.add(e.knode()),this.children.splice(t,0,e),this.addChildLink(),this.adjust({downward:!0,upward:!0})}else j["a"].Logger.error("BTEntityNode::insertChild failed -  child is null")}},{key:"removeChild",value:function(e){if(e){var t=this.children.indexOf(e);this.children.splice(t,1),e.knode().remove();var n=this.links[t];n.destroy(),this.links.splice(t,1),this.adjust({downward:!0,upward:!0})}}},{key:"removeChildren",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.knode().remove(),this.links[e].destroy()}this.links=[];var n=[].concat(this.children);return this.children=[],n}},{key:"addChildLink",value:function(){var e=new T.a.Arrow({x:0,y:0,points:[0,0,25,0,L.node.childSpace.horizonal,0],pointerLength:8,pointerWidth:8,fill:"#cccccc",stroke:"#cccccc",strokeWidth:2,tension:0,visible:this.isExpanding});return this.linkZone.add(e),this.links.push(e),e}},{key:"addChild",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&this.config.acceptChild&&(e.visible(this.isExpanding),this.childZone.add(e.knode()),this.children.push(e),this.addChildLink(),t&&(this.adjust({downward:!0,upward:!0}),this.refresh()))}},{key:"intersection",value:function(e){return L.layout.vertical?this.intersectionV(e):this.intersectionH(e)}},{key:"intersectionV",value:function(e){var t={width:this.background.width(),height:this.background.height()},n={width:this.size().width,height:this.size().height},i=this.background.width(),o=this.root.getAbsolutePosition(),r=this.stage().zoom,a={left:o.x+(t.width-n.width)/2*r,right:o.x+(t.width+n.width)/2*r,top:o.y+t.height*r,bottom:o.y+(t.height+L.node.childSpace.vertical)*r};if(e.y<a.top||e.y>a.bottom)return-1;var s=-1;if(0===this.children.length)e.x>o.x&&e.x<o.x+i*r&&(s=0);else{var c,l=[],h=0,u=0,d=ye(this.children);try{for(d.s();!(c=d.n()).done;){var f=c.value,v=f.clientWidth();l.push(v/2+h),h=v/2+L.node.childSpace.horizonal,u+=v+L.node.childSpace.horizonal}}catch(y){d.e(y)}finally{d.f()}l.push(h),u-=L.node.childSpace.horizonal,u=Math.max(n.width,u);for(var p=o.x+(n.width-u)/2*r,g=0;g<l.length;g++){if(0===g&&e.x<p)break;if(p+=l[g]*r,e.x<p){s=g;break}}}return s}},{key:"intersectionH",value:function(e){var t=this.background.width(),n=this.root.getAbsolutePosition(),i=this.stage().zoom,o={left:n.x+t*i,right:n.x+(t+L.node.childSpace.horizonal)*i};if(e.x<o.left||e.x>o.right)return-1;var r=-1,a=this.size().height;if(0===this.children.length)e.y>n.y&&e.y<n.y+a*i&&(r=0);else{var s,c=[],l=0,h=0,u=ye(this.children);try{for(u.s();!(s=u.n()).done;){var d=s.value,f=d.clientHeight();c.push(f/2+l),l=f/2+L.node.childSpace.vertical,h+=f+L.node.childSpace.vertical}}catch(g){u.e(g)}finally{u.f()}c.push(l),h-=L.node.childSpace.vertical,h=Math.max(a,h);for(var v=n.y+(a-h)/2*i,p=0;p<c.length;p++){if(0===p&&e.y<v)break;if(v+=c[p]*i,e.y<v){r=p;break}}}return r}},{key:"indexOfElement",value:function(e){return e instanceof de?this.decorators.indexOf(e):e instanceof ge?this.services.indexOf(e):-1}},{key:"indexOfChild",value:function(e){return e instanceof n?this.children.indexOf(e):-1}},{key:"resizeWidth",value:function(e){Object(Z["a"])(Object(N["a"])(n.prototype),"resizeWidth",this).call(this,e);var t=this.background.width(),i=this.background.height();if(this.expand&&this.expand.position({x:L.layout.vertical?t/2:t,y:L.layout.vertical?i:i/2}),e){var o=(e-L.zone.fixedWidth)/2-L.node.margin;this.decoratorZone&&this.decoratorZone.x(o),this.serviceZone&&this.serviceZone.x(o);var r,a=ye(this.elements());try{for(a.s();!(r=a.n()).done;){var s=r.value;s.resizeWidth(e-2*L.node.margin)}}catch(c){a.e(c)}finally{a.f()}L.layout.vertical?(this.childZone&&this.childZone.x(t/2),this.linkZone&&this.linkZone.x(t/2)):(this.childZone&&this.childZone.x(e+L.node.childSpace.horizonal),this.linkZone&&this.linkZone.x(e))}}},{key:"toggleExpand",value:function(){this.isExpanding=!this.isExpanding,this.expandChildren(this.isExpanding)}},{key:"expandChildren",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isExpanding=e,this.expand.setExpand(e);var t,n=ye(this.children);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.visible(e)}}catch(s){n.e(s)}finally{n.f()}var o,r=ye(this.links);try{for(r.s();!(o=r.n()).done;){var a=o.value;a.visible(e)}}catch(s){r.e(s)}finally{r.f()}this.refresh()}},{key:"elements",value:function(){return[].concat(this.decorators,this.title,this.services)}},{key:"childHeight",value:function(){var e,t=0,n=ye(this.children);try{for(n.s();!(e=n.n()).done;){var i=e.value;t+=i.clientHeight(),t+=L.node.childSpace.vertical}}catch(o){n.e(o)}finally{n.f()}return this.children.length>0&&(t-=L.node.childSpace.vertical),t}},{key:"clientHeight",value:function(){return Math.max(this.childHeight(),this.background.height())}},{key:"childWidth",value:function(){var e,t=0,n=ye(this.children);try{for(n.s();!(e=n.n()).done;){var i=e.value;t+=i.clientWidth(),t+=L.node.childSpace.horizonal}}catch(o){n.e(o)}finally{n.f()}return this.children.length>0&&(t-=L.node.childSpace.horizonal),t}},{key:"clientWidth",value:function(){return Math.max(this.childWidth(),this.background.width())}},{key:"adjust",value:function(e){L.layout.vertical?this.adjustVertical(e):this.adjustHorizontal(e)}},{key:"adjustVertical",value:function(e){var t=j["a"].Utils.lodash.merge({downward:!1,upward:!1},e);if(t.downward){var n,i=ye(this.children);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.adjust({downward:!0})}}catch(x){i.e(x)}finally{i.f()}}var r,a=0,s=L.zone.height+2+L.node.space,c=ye(this.elements());try{for(c.s();!(r=c.n()).done;){var l=r.value;l.knode().y(s),l.adjust(),a=Math.max(a,l.clientWidth()),s+=l.clientHeight()+L.node.space}}catch(x){c.e(x)}finally{c.f()}a=Math.max(L.node.minWidth,a+2*L.node.margin);var h=Math.max(L.node.minHeight,s+L.zone.height+2),u=L.node.space;this.background.height(h),this.resizeWidth(a),this.serviceZone&&this.serviceZone.y(h-L.zone.height-2),this.expand&&this.expand.y(h+u),this.childZone&&this.childZone.y(h+L.node.childSpace.vertical+L.node.margin),this.linkZone&&this.linkZone.y(h+u),s=L.node.childSpace.vertical;for(var d=-this.childWidth()/2,f=0;f<this.children.length;f++){var v=this.children[f],p=(v.clientHeight(),v.clientWidth()),g=(v.size().height,v.size().width),y=this.links[f],m=d+(p-g)/2;v.knode().x(m);var b=m+g/2,k=s,w=4*b/4,C=0;y.points([0,0,w,C,b,k]),d+=p+L.node.childSpace.horizonal}if(t.upward){var z=this.parent();while(z)z.adjust(),z=z.parent()}}},{key:"adjustHorizontal",value:function(e){var t=j["a"].Utils.lodash.merge({downward:!1,upward:!1},e);if(t.downward){var n,i=ye(this.children);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.adjust({downward:!0})}}catch(b){i.e(b)}finally{i.f()}}var r,a=0,s=L.zone.height+2+L.node.space,c=ye(this.elements());try{for(c.s();!(r=c.n()).done;){var l=r.value;l.knode().y(s),l.adjust(),a=Math.max(a,l.clientWidth()),s+=l.clientHeight()+L.node.space}}catch(b){c.e(b)}finally{c.f()}a=Math.max(L.node.minWidth,a+2*L.node.margin);var h=Math.max(L.node.minHeight,s+L.zone.height+2);this.resizeWidth(a),this.background.height(h),this.serviceZone&&this.serviceZone.y(h-L.zone.height-2),this.expand&&this.expand.y(h/2),this.childZone&&this.childZone.y(h/2),this.linkZone&&this.linkZone.y(h/2),s=-this.childHeight()/2;for(var u=0;u<this.children.length;u++){var d=this.children[u],f=d.clientHeight(),v=d.size().height,p=this.links[u],g=s+(f-v)/2;d.knode().y(g);var y=g+v/2;p.points([0,0,0,4*y/4,L.node.childSpace.horizonal,y]),s+=f+L.node.childSpace.vertical}if(t.upward){var m=this.parent();while(m)m.adjust(),m=m.parent()}}},{key:"destroy",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t){var n=this.parent();n&&n.removeChild(this)}if(this.clearChildren(),e){var i,o=ye(this.elements());try{for(o.s();!(i=o.n()).done;){var r=i.value;r.destroy(!0,!1)}}catch(s){o.e(s)}finally{o.f()}this.root.destroy()}if(t){var a=this.stage();a&&a.snapshot()}}},{key:"clearChildren",value:function(){if(this.children){var e,t=ye(this.children);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.destroy(!0,!1)}}catch(a){t.e(a)}finally{t.f()}this.children=[]}if(this.links){var i,o=ye(this.links);try{for(o.s();!(i=o.n()).done;){var r=i.value;r.destroy()}}catch(a){o.e(a)}finally{o.f()}this.links=[]}this.adjust()}},{key:"label",value:function(){return this.title}},{key:"getInvert",value:function(){return this.title.getInvert()}},{key:"getTitle",value:function(){return this.title.getTitle()}},{key:"getTag",value:function(){return this.title.getTag()}},{key:"getScript",value:function(){return this.title.getScript()}},{key:"getSubtitles",value:function(){return this.title.getSubtitles()}},{key:"refreshTag",value:function(){var e=L.createTag();return this.setTag(e),e}},{key:"setTag",value:function(e){return this.config.label&&(this.config.label.tag=e),this.title.setTag(e)}},{key:"setTitle",value:function(e){return this.config.label&&(this.config.label.title=e),this.title.setTitle(e)}},{key:"setScript",value:function(e,t){return this.title.setScript(e,t)}},{key:"setInvert",value:function(e){return this.title.setInvert(e)}},{key:"setSubtitles",value:function(e){return this.title.setSubtitles(e)}},{key:"toJson",value:function(){var e,t={type:this.config.type,config:this.config,elements:[],children:[]},n=ye(this.decorators);try{for(n.s();!(e=n.n()).done;){var i=e.value;t.elements.push(i.toJson())}}catch(h){n.e(h)}finally{n.f()}var o,r=ye(this.services);try{for(r.s();!(o=r.n()).done;){var a=o.value;t.elements.push(a.toJson())}}catch(h){r.e(h)}finally{r.f()}var s,c=ye(this.children);try{for(c.s();!(s=c.n()).done;){var l=s.value;t.children.push(l.toJson())}}catch(h){c.e(h)}finally{c.f()}return t}},{key:"serialize",value:function(){var e,t={type:this.config.type,config:this.exportConfig(),elements:[],children:[]},n=ye(this.decorators);try{for(n.s();!(e=n.n()).done;){var i=e.value;t.elements.push(i.serialize())}}catch(h){n.e(h)}finally{n.f()}var o,r=ye(this.services);try{for(r.s();!(o=r.n()).done;){var a=o.value;t.elements.push(a.serialize())}}catch(h){r.e(h)}finally{r.f()}var s,c=ye(this.children);try{for(c.s();!(s=c.n()).done;){var l=s.value;t.children.push(l.serialize())}}catch(h){c.e(h)}finally{c.f()}return t}},{key:"serializeTargetUUIDs",value:function(){var e,t=this.exportTargetUUIDs(),n=ye(this.decorators);try{for(n.s();!(e=n.n()).done;){var i=e.value;t=t.concat(i.serializeTargetUUIDs())}}catch(h){n.e(h)}finally{n.f()}var o,r=ye(this.services);try{for(r.s();!(o=r.n()).done;){var a=o.value;t=t.concat(a.serializeTargetUUIDs())}}catch(h){r.e(h)}finally{r.f()}var s,c=ye(this.children);try{for(c.s();!(s=c.n()).done;){var l=s.value;t=t.concat(l.serializeTargetUUIDs())}}catch(h){c.e(h)}finally{c.f()}return Array.from(new Set(t))}},{key:"updateOrder",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(e<0){var t,n=ye(this.elements());try{for(n.s();!(t=n.n()).done;){var i=t.value;i.order(-1)}}catch(k){n.e(k)}finally{n.f()}var o,r=ye(this.children);try{for(r.s();!(o=r.n()).done;){var a=o.value;a.updateOrder()}}catch(k){r.e(k)}finally{r.f()}return-1}var s=e;if(0===s){var c,l=ye(this.decorators);try{for(l.s();!(c=l.n()).done;){var h=c.value;h.order(-1)}}catch(k){l.e(k)}finally{l.f()}}else{var u,d=ye(this.decorators);try{for(d.s();!(u=d.n()).done;){var f=u.value;f.order(s++)}}catch(k){d.e(k)}finally{d.f()}}this.label().order(s++);var v,p=ye(this.services);try{for(p.s();!(v=p.n()).done;){var g=v.value;g.order(s++)}}catch(k){p.e(k)}finally{p.f()}var y,m=ye(this.children);try{for(m.s();!(y=m.n()).done;){var b=y.value;s=b.updateOrder(s)}}catch(k){m.e(k)}finally{m.f()}return s}},{key:"canAcceptDecorator",value:function(){return this.config.acceptDecorator}},{key:"canAcceptService",value:function(){return this.config.acceptService}},{key:"canAcceptChild",value:function(){return this.config.acceptChild}},{key:"refreshComponent",value:function(e,t){"function"==typeof e&&"function"==typeof t&&(Object(Z["a"])(Object(N["a"])(n.prototype),"refreshComponent",this).call(this,e,t),this.decorators.forEach((function(n){n.refreshComponent(e,t)})),this.services.forEach((function(n){n.refreshComponent(e,t)})),this.children.forEach((function(n){n.refreshComponent(e,t)})))}}]),n}(te),ze=Ce;n("9fda");function xe(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Oe(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function Oe(e,t){if(e){if("string"===typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Se(e,t):void 0}}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function je(e){var t=Me();return function(){var n,i=Object(N["a"])(e);if(t){var o=Object(N["a"])(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Object(P["a"])(this,n)}}function Me(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Te=function(e){Object(B["a"])(n,e);var t=je(n);function n(e){return Object(O["a"])(this,n),t.call(this,j["a"].Utils.lodash.merge({acceptDecorator:!1,acceptService:!1,canMove:!1,canClose:!1,type:"root",label:{icon:"root",title:"Root",subtitles:["root"],order:-2}},e))}return Object(S["a"])(n,[{key:"updateOrder",value:function(e){this.label().order(-2),this.children.length>0&&this.children[0].updateOrder(0),this.stage().refresh()}},{key:"insertChild",value:function(e,t){if(e){var n=e.parent();n.removeChild(e),this.addChild(e)}}},{key:"addChild",value:function(e){if(e&&this.config.acceptChild&&(e.childZone||!(this.children.length>0))){var t=this.removeChildren();if(this.childZone.add(e.knode()),this.children.push(e),this.addChildLink(),t.length>0){var n,i=xe(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;e.childZone.add(o.knode()),e.children.push(o),e.addChildLink()}}catch(r){i.e(r)}finally{i.f()}e.expandChildren(!0),e.adjust({downward:!0,upward:!0})}this.adjust()}}}]),n}(ze),Ae=Te;function Ie(e){var t=De();return function(){var n,i=Object(N["a"])(e);if(t){var o=Object(N["a"])(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Object(P["a"])(this,n)}}function De(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Re=function(e){Object(B["a"])(n,e);var t=Ie(n);function n(e){return Object(O["a"])(this,n),e.fill=L.fills["composite"],t.call(this,j["a"].Utils.lodash.merge({type:"composite",names:{composite:!0}},e))}return Object(S["a"])(n)}(ze),Le=Re;function Ze(e){var t=Be();return function(){var n,i=Object(N["a"])(e);if(t){var o=Object(N["a"])(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Object(P["a"])(this,n)}}function Be(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Pe=function(e){Object(B["a"])(n,e);var t=Ze(n);function n(e){return Object(O["a"])(this,n),t.call(this,j["a"].Utils.lodash.merge({type:"selector",label:{icon:"selector",title:"Selector",fill:"#675F57",subtitles:["selector"]}},e))}return Object(S["a"])(n)}(Le),Ne=Pe;function Ee(e){var t=We();return function(){var n,i=Object(N["a"])(e);if(t){var o=Object(N["a"])(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Object(P["a"])(this,n)}}function We(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Ue=function(e){Object(B["a"])(n,e);var t=Ee(n);function n(e){return Object(O["a"])(this,n),t.call(this,j["a"].Utils.lodash.merge({type:"sequence",label:{icon:"sequence",title:"Sequence",fill:"#675F57",subtitles:["sequence"]}},e))}return Object(S["a"])(n)}(Le),Fe=Ue;function Je(e){var t=_e();return function(){var n,i=Object(N["a"])(e);if(t){var o=Object(N["a"])(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Object(P["a"])(this,n)}}function _e(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var He=function(e){Object(B["a"])(n,e);var t=Je(n);function n(e){return Object(O["a"])(this,n),t.call(this,j["a"].Utils.lodash.merge({type:"parallel",label:{icon:"parallel",title:"Parallel",fill:"#675F57",subtitles:["parallel"]}},e))}return Object(S["a"])(n)}(Le),Ve=He;function $e(e){var t=qe();return function(){var n,i=Object(N["a"])(e);if(t){var o=Object(N["a"])(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Object(P["a"])(this,n)}}function qe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Ke=function(e){Object(B["a"])(n,e);var t=$e(n);function n(e){return Object(O["a"])(this,n),e.label.fill=L.fills["task"],t.call(this,j["a"].Utils.lodash.merge({acceptService:!1,acceptChild:!1,type:"task",label:{icon:"task",title:"Task",fill:"#2C2C2C",subtitles:["task"],events:{}}},e))}return Object(S["a"])(n)}(ze),Ge=Ke;function Xe(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ye(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function Ye(e,t){if(e){if("string"===typeof e)return Qe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qe(e,t):void 0}}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var et=function(){function e(t){var n=this;Object(O["a"])(this,e),this.options={draggable:!0,canZoom:!0,canWheelZoom:!0,readonly:!1,debug:!1,events:{}},j["a"].Utils.lodash.merge(this.options,t),this.stage=new T.a.Stage(this.options),this.stage.setAttr("@stage",this),this.root=null,this.layers={},this.layers.model=new T.a.Layer,this.stage.add(this.layers.model),this.layers.drag=new T.a.Layer,this.stage.add(this.layers.drag),this.isDraging=!1,this.dragMarker=new T.a.Group({name:"dragmarker",draggable:!0,visible:!1}),this.layers.drag.add(this.dragMarker),this.dropMarker=new T.a.Rect({name:"dropmarker",x:0,y:0,width:0,height:0,fill:L.zone.highlight,visible:!1}),this.layers.drag.add(this.dropMarker),this._loaded=!1,this.modified=!1,this.mousePos={x:0,y:0},this.zoom=1,this.minZoom=.25,this.maxZoom=5,this.zoomFactor=1.25,this.maxAction=50,this.actions=[],this.actionIndex=-1,this.select=null,this.selectPos=null,this.orderCache={},this.addRootNode(),this.stage.on("mousedown",(function(e){var t=e.target,i=n.findNodeParent(t);i&&"label"===i.nodeType()&&(i=i.parent()),i&&(n.select!==i&&(n.select&&n.select.selected(!1),n.select=i,n.select&&(n.selectPos=n.stage.getPointerPosition(),n.select.selected(!0),n.options.events.select&&n.options.events.select(n.select))),n.select&&n.select.canMove()&&0==e.evt.button&&(n.dragMarker.setAttr("@drag",n.select),n.isDraging=!1),n.refresh())})),this.stage.on("mouseup",(function(e){n.isDraging||(n.isDraging=!1,n.dragMarker.setAttr("@drag",null))})),this.stage.on("mousemove",(function(e){n.mousePos=n.stage.getPointerPosition();var t=n.dragMarker.getAttr("@drag");!t||n.isDraging||n.isReadOnly()||(n.isDraging=!0,n.dragMarker.startDrag())})),this.stage.on("dblclick",(function(e){n.select&&n.select!==n.root&&(n.isReadOnly()&&!n.isDebug()||n.options.events.edit&&n.options.events.edit(n.select))})),this.stage.on("dragstart",(function(e){})),this.stage.on("dragmove",(function(e){if(!(e.target instanceof T.a.Stage||n.isReadOnly())){n.mousePos=n.stage.getPointerPosition();var t=n.stage.getIntersection(n.mousePos);t instanceof T.a.Arrow&&(t=null);var i=n.findNodeParent(t),o=n.dragMarker.getAttr("@drag"),r=o.nodeType(),a={};if(i===o);else{if(t)t.hasName("dropzone")&&t.canDrop(r)?(a.type="dropzone",a.zone=t,a.node=i):i.isType("accessory")&&i.canDrop(r)&&(a.type="accessory",a.node=i,a.zone=i);else if(o.isType("entity")){var s,c=n.layers.model.find(".entity"),l=Xe(c);try{for(l.s();!(s=l.n()).done;){var h=s.value,u=h.getAttr("@node");if(u.canAcceptChild()&&u.isVisible()&&(u!==o&&!u.hasParent(o)&&(u!==n.root||o.isType("composite")&&!(o.level()<=1)))){var d=u.intersection(n.mousePos);if(d>=0){a.type="child",a.index=d,a.node=u;break}}}}catch(v){l.e(v)}finally{l.f()}}var f=n.dropMarker.getAttr("@drop");f&&f.type===a.type&&f.zone===a.zone&&f.index===a.index&&f.node===a.node||(n.dropMarker.setAttr("@drop",a),f&&(f.zone?f.zone.setDropping(!1):f.index>=0&&f.node.setChildDropping(-1)),a.zone?a.zone.setDropping(!0):a.index>=0&&a.node.setChildDropping(a.index))}}})),this.stage.on("dragend",(function(e){if(n.isDraging){n.dragMarker.stopDrag();var t=n.dragMarker.getAttr("@drag"),i=t.nodeType(),o=n.dropMarker.getAttr("@drop");if(o){if(o.zone){o.zone.setDropping(!1);var r=o.node,a=-1;"accessory"===o.type&&(r=o.node.parent(),"decorator"===i?a=r.decorators.indexOf(o.zone):"service"===i&&(a=r.service.indexOf(o.zone))),r.insertElement(t,a)}else o.index>=0&&(o.node.setChildDropping(-1),o.node.insertChild(t,o.index));n.snapshot()}n.updateOrder(),n.dragMarker.setAttr("@drag",null),n.isDraging=!1,n.dragMarker.stopDrag()}})),this.stage.on("wheel",(function(e){e.evt.deltaX;var t=e.evt.deltaY,i=t<0?.1:-.1,o=n.zoom;n.zoom=Math.min(Math.max(n.minZoom,n.zoom+i*n.zoom),n.maxZoom),n.stage.scale({x:n.zoom,y:n.zoom});var r=n.stage.getSize(),a=r.width,s=r.height,c=a*n.zoom-a*o,l=s*n.zoom-s*o,h=e.evt.clientX-0,u=e.evt.clientY-0,d=(h-n.stage.x())/o/a,f=(u-n.stage.y())/o/s;n.stage.x(n.stage.x()-c*d),n.stage.y(n.stage.y()-l*f),n.refresh()})),this.refresh(),this.cache=null;var i=this.stage.container();i.oncontextmenu=function(e){e.preventDefault()},i.tabIndex=1,i.focus(),i.style.backgroundColor="#363636",i.addEventListener("keydown",(function(e){if(e.ctrlKey&&!e.metaKey||!e.ctrlKey&&e.metaKey){if(67===e.keyCode)n.select&&n.select!==n.root&&(n.cache=j["a"].Utils.common.clone(n.select.toJson()));else if(86===e.keyCode){if(n.cache){var t=n.selectedNode();if(t&&t.isType("label")&&(t=t.parent()),n.cache.config.names["label"])if("decorator"===n.cache.type&&t.canAcceptDecorator())t.addDecorator(n.cache.config),n.snapshot();else{if("service"!==n.cache.type||!t.canAcceptService())return;t.addService(n.cache.config),n.snapshot()}else if(n.cache.config.names["entity"]&&(t===n.root&&n.topNode()&&(t=n.topNode()),t.canAcceptChild())){var i=n.createEntity(n.cache);if(!i)return;t.addChild(i),n.snapshot()}n.updateOrder(),n.setModify(!0)}}else if(79===e.keyCode)n.options.events.open&&n.options.events.open();else{if(83!==e.keyCode)return;n.options.events.save&&n.options.events.save()}e.preventDefault(),n.layers.model.batchDraw()}else n.select&&n.select!==n.root&&(37===e.keyCode||e.keyCode)}))}return Object(S["a"])(e,[{key:"snapshot",value:function(){this.actions.length>=this.maxAction&&this.actions.splice(0,1),this.actionIndex>=0&&this.actionIndex<this.actions.length-1&&this.actions.splice(this.actionIndex+1,this.actions.length-this.actionIndex-1);var e=this.saveToJson();this.actions.push(e),this.actionIndex=this.actions.length-1}},{key:"refresh",value:function(){this.stage.draw()}},{key:"setModify",value:function(e){this._loaded&&this.options.events.modify&&this.options.events.modify(e)}},{key:"updateOrder",value:function(){this.root.updateOrder(-1)}},{key:"cacheOrder",value:function(e,t){}},{key:"findNodeParent",value:function(e){var t=e;while(t){if(t instanceof T.a.Group&&t.hasName("node"))break;t=t.getParent()}return t?t.getAttr("@node"):null}},{key:"addRootNode",value:function(){this.root=new Ae({x:L.layout.vertical?this.stage.width()/2:20,y:L.layout.vertical?50:this.stage.height()/2}),this.layers.model.add(this.root.knode())}},{key:"addSelectorNode",value:function(e){var t=Object.assign({},e),n=this.getNode(t.parent),i=new Ne(t.config);return n.addChild(i),i}},{key:"addSequenceNode",value:function(e){var t=Object.assign({},e),n=this.getNode(t.parent),i=new Fe(t.config);return n.addChild(i),i}},{key:"addParallelNode",value:function(e){var t=Object.assign({},e),n=this.getNode(t.parent),i=new Ve(t.config);return n.addChild(i),i}},{key:"addTaskNode",value:function(e){var t=Object.assign({},e),n=this.getNode(t.parent),i=new Ge(t.config);return n.addChild(i),i}},{key:"getNode",value:function(e){if(e){var t=this.layers.model.find("#"+e);if(t.length>0){1!==t.length&&j["a"].Logger.warn("Stage::getNode - Node <".concat(e,"> is not unique"));var n=t[0].getAttr("@node");if(n instanceof ze)return n;j["a"].Logger.error("Stage::getNode - Node <".concat(e,"> is not BTEnittyNode"))}}return this.root}},{key:"resize",value:function(e,t){e&&this.stage.width(e),t&&this.stage.height(t),this.stage.draw()}},{key:"zoomIn",value:function(){this.options.canZoom&&(this.zoom=j["a"].Utils.lodash.clamp(this.zoom*this.zoomFactor,this.minZoom,this.maxZoom),this.stage.scale({x:this.zoom,y:this.zoom}),this.refresh())}},{key:"zoomOut",value:function(){this.options.canZoom&&(this.zoom=j["a"].Utils.lodash.clamp(this.zoom/this.zoomFactor,this.minZoom,this.maxZoom),this.stage.scale({x:this.zoom,y:this.zoom}),this.refresh())}},{key:"reset",value:function(){this.zoom=1,this.stage.scale({x:this.zoom,y:this.zoom}),this.stage.position({x:0,y:0}),this.refresh()}},{key:"selectedNode",value:function(){return this.select?this.select:this.root}},{key:"topNode",value:function(){return this.root.children[0]}},{key:"clear",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.modified=!1,e&&(this.actions=[],this.actionIndex=-1),this.select=null,this.isDraging=!1,this.dragMarker.setAttr("@drag",null),this.dropMarker.setAttr("@drop",null),this.root.selected(!1),this.root.clearChildren(),this.refresh()}},{key:"createEntity",value:function(e){if(!e||!e.type)return null;var t=null;if("composite"===e.type?t=new Le(e.config):"selector"===e.type?t=new Ne(e.config):"sequence"===e.type?t=new Fe(e.config):"parallel"===e.type?t=new Ve(e.config):"task"===e.type&&(t=new Ge(e.config)),!t)return j["a"].Logger.error("BTStage::addEnity failed - unknown node : ".concat(e.type)),null;if(e.elements){var n,i=Xe(e.elements);try{for(i.s();!(n=i.n()).done;){var o=n.value;"decorator"===o.type?t.addDecorator(o.config,-1,!1):"service"===o.type&&t.addService(o.config,-1,!1)}}catch(l){i.e(l)}finally{i.f()}}if(e.children){var r,a=Xe(e.children);try{for(a.s();!(r=a.n()).done;){var s=r.value,c=this.createEntity(s);c&&t.addChild(c,!1)}}catch(l){a.e(l)}finally{a.f()}}return t}},{key:"refreshComponent",value:function(e,t){this.root&&this.root.refreshComponent(e,t)}},{key:"loadFromJson",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.clear(t),e){var n=null;e.root?(n=this.createEntity(e.root),n?(this.root.addChild(n),this.root.adjust({downward:!0}),this.updateOrder(),t&&this.snapshot(),this.refresh(),this._loaded=!0):j["a"].Logger.error("BTStage::loadFromJson failed - data.root is currupted")):j["a"].Logger.warn("BTStage::loadFromJson - data is ",e)}}},{key:"saveToJson",value:function(){var e={},t=this.root.children[0];return t&&(e.root=t.serialize(),e.refs=[]),j["a"].Utils.common.clone(e)}},{key:"saveToImage",value:function(){}},{key:"hasUndo",value:function(){return this.actions.length>1&&this.actionIndex>0}},{key:"undo",value:function(){if(this.actions.length<=1)return this.actionIndex=this.actions.length-1,void this.showInfo("No actions to undo");if(this.actionIndex<0&&(this.actionIndex=this.actions.length-1),this.actionIndex>0){this.actionIndex-=1;var e=this.actions[this.actionIndex];this.loadFromJson(e,!1)}}},{key:"hasRedo",value:function(){return this.actionIndex>=0&&this.actionIndex<this.actions.length-1}},{key:"redo",value:function(){if(this.actionIndex<0)this.showInfo("No actions to redo");else if(this.actionIndex<this.actions.length-1){this.actionIndex+=1;var e=this.actions[this.actionIndex];this.loadFromJson(e,!1)}}},{key:"showInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;this.options.message&&this.options.message.info({content:e,duration:t})}},{key:"isReadOnly",value:function(){return this.options.readonly}},{key:"isDebug",value:function(){return this.options.debug}}]),e}(),tt=et,nt={init:function(e){return new tt(e)}},it=nt,ot=n("eb11"),rt=n.n(ot),at=n("9224"),st={composite:[{group:"composite",type:"parallel",name:"bt.Parallel",uuid:"9c55eEnAU5MQ6P8rjZaM2YO",properties:{}},{group:"composite",type:"selector",name:"bt.Selector",uuid:"8a33895bcRHv7EVmZOdpDNK",properties:{}},{group:"composite",type:"sequence",name:"bt.Sequence",uuid:"7c895CfOwBCgKYk2gJEdRCX",properties:{}}],decorator:[{group:"decorator",type:"condition",name:"bt.Condition",uuid:"7b4b7XI0mlA4rLTq7v8f0Hh",properties:{}},{group:"decorator",type:"decorator",name:"bt.Decorator",uuid:"7b4b7XI0mlA4rLTq7v8f0Hh",properties:{}}],service:[{group:"service",type:"service",name:"bt.Service",uuid:"d81368ZrotCT4r3PkihUhzn",properties:{}}],task:[{group:"task",type:"task",name:"bt.Task",uuid:"b8a95IvA3BKL7nNXvpCa2CL",properties:{serializableDummy:{default:0}}}]},ct=st,lt={buildin:!0,showMenu:!1,isModify:!1,version:"",uuid:"",SHA:"",options:{stage:null,message:null,component:null,onSelect:null,onRefresh:null,onSaveToJson:null,onInitBlackboard:null,onRefreshComponent:null,onSwitchOnTop:null,onFetchConfig:null},menus:{},components:ct,jsonAsset:null,initOptions:function(e){for(var t in e)this.options[t]=e[t]},initMenus:function(e){for(var t in e)this.menus[t]=e[t]},onInitBlackboard:function(){this.options.onInitBlackboard&&this.options.onInitBlackboard()},onSelectNode:function(e){this.buildin&&!this.options.component||this.options.onSelect&&this.options.onSelect(e)},onRefreshNode:function(e){this.buildin&&!this.options.component||this.options.onRefresh&&this.options.onRefresh(e)},onRefreshComponent:function(){this.buildin&&!this.options.component||this.options.onRefreshComponent&&this.options.onRefreshComponent()},onSwitchOnTop:function(e){this.buildin&&!this.options.component||this.options.onSwitchOnTop&&this.options.onSwitchOnTop(e)},onLoadJsonFile:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.buildin||this.options.component){e.next=2;break}return e.abrupt("return",t);case 2:if(!this.options.onLoadJsonFile){e.next=6;break}return e.next=5,this.options.onLoadJsonFile(t);case 5:t=e.sent;case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onSaveToJson:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.buildin&&this.jsonAsset){e.next=2;break}return e.abrupt("return");case 2:if(!this.options.onSaveToJson){e.next=6;break}return this.jsonAsset.json=t,e.next=6,this.options.onSaveToJson(this.jsonAsset);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),addComponent:function(e){var t=this.getComponents(e.group);t.push(e)},getComponents:function(e){var t=this.components,n=t[e];return n||(n=t[e]=[]),n},getComponentByUUID:function(e){if(!e)return null;for(var t in this.components){var n=this.components[t],i=n.find((function(t){return t.uuid==e}));if(i)return i}return null},clear:function(){this.components={}}},ht=lt;function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){Object(y["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}window.oreo=window.oreo||ht;var ft={data:function(){return{minVersion:"",size:{width:0,height:0},scene:{stage:null,cachekey:"hydruscache"},nodeTypes:{selector:"Selector",sequence:"Sequence",parallel:"Parallel",task:"Task",decorator:"Decorator",service:"Service"},groups:[{group:"composite",title:"Composite"},{group:"decorator",title:"Decorator"},{group:"service",title:"Service"},{group:"task",title:"Task"}],icons:{composite:"ios-cube-outline",selector:"md-help",sequence:"md-arrow-forward",parallel:"ios-menu",interrupt:"ios-alert-outline",condition:"ios-checkbox-outline",decorator:"ios-color-wand-outline",service:"ios-sync",task:"ios-arrow-dropright"}}},directives:{resize:k.a},computed:dt({isBuildin:function(){return window.oreo.buildin}},Object(m["b"])(["menu","getTabCollapse"])),methods:{switchOnTop:function(e){this.$store.commit("switchMenuOnTop",e),window.oreo.onSwitchOnTop(e)},switchMenuVisible:function(e){this.$store.commit("switchMenuVisible",e)},getCollapseValue:function(e){var t=this.getTabCollapse(e);return t},setCollapseValue:function(e,t){this.$store.commit("setTabCollapse",{name:e,value:t})},drop_handler:function(e){e.preventDefault();var t=e.dataTransfer.getData("component-data");t&&(t=JSON.parse(t),t.type&&this.handleAddCommand(t))},dragover_handler:function(e){e.preventDefault()},onBtnDragStart:function(e,t){t=t||{};var n=JSON.stringify(t);e.dataTransfer.setData("component-data",n)},handleClick:function(){},getComponents:function(e){return window.oreo.getComponents(e)},getIcon:function(e){return this.icons[e.type]},getIconClass:function(e){return""},getAccordion:function(){return!1},onContainerResize:function(){this.size.width=this.$el.clientWidth,this.size.height=this.$el.clientHeight,this.scene.stage&&this.scene.stage.resize(this.size.width,this.size.height)},handleSelectCommand:function(e){e&&window.oreo.onSelectNode(e)},handleAddCommand:function(e){var t=j["a"].Utils.common.clone(e);t.name&&("bt.Interrupter"==t.name&&(t.isInterrupter=!0),t.name.startsWith("bt.")&&(t.name=t.name.replace("bt.","")));var n=t.type,i=this.scene.stage.selectedNode();i&&i.isType("label")&&(i=i.parent()),t.subtitles=[n],t.title=t.name,"condition"==t.type&&(t.isCondition=!0);var o=!1;if("decorator"===t.group){if(!i.canAcceptDecorator())return void this.$Message.error({content:"Selected Node can not add "+n})}else if("service"===t.group){if(!i.canAcceptService())return void this.$Message.error({content:"Selected Node can not add "+n})}else if(o=!0,"composite"===t.group){if(!i.canAcceptChild())return void this.$Message.error({content:"Selected Node can not add "+n})}else{if("task"!==t.group)return void this.$Message.error({content:"Unknown Command - "+n});if(!i.canAcceptChild()||i==this.scene.stage.root)return void this.$Message.error({content:"Selected Node can not add "+n})}o?this.onAddEntity(i,t):this.onAddElement(i,t),this.scene.stage.updateOrder(),this.scene.stage.refresh(),this.scene.stage.snapshot(),this.scene.stage.setModify(!0)},onAddElement:function(e,t){t.icon=t.type,t.type=void 0,"decorator"===t.group?e.addDecorator(t):"service"===t.group&&e.addService(t)},onAddEntity:function(e,t){var n=t.type;t.type=void 0;var i={type:n,config:{label:t}},o=this.scene.stage.createEntity(i);e.addChild(o)},onEditElement:function(e){},onEditEntity:function(e){},loadLocalFile:function(){var e=this,t=this.$el.querySelector("#hydrusfile").files[0],n=t.name,i=t.size;if(0!==i){var o=new FileReader;o.onload=function(){var t=JSON.parse(o.result);e.onLoadLocalFile(t)},o.readAsText(t)}else this.$Message.error({content:"File <".concat(n,"> is empty"),duration:2})},onLoadLocalFile:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.oreo.onLoadJsonFile(t);case 2:this.$store.commit("updateInternalCache",t),this.scene.stage.loadFromJson(t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),load:function(){this.$el.querySelector("#hydrusfile").click()},save:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t,n,i,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.oreo.isModify=!1,!this.isBuildin){e.next=12;break}if(this.scene.cache=this.scene.stage.saveToJson(),this.$store.commit("updateInternalCache",this.scene.cache),this.scene.cache.root){e.next=7;break}return this.$Message.info({content:"Please do not save empty tree !",duration:3}),e.abrupt("return");case 7:t=this.scene.cache.root.config.label.title,n=new Blob([JSON.stringify(this.scene.cache)],{type:"text/plain;charset=utf-8"}),C.a.saveAs(n,t+"-"+j["a"].Utils.common.currentDateString(!0)+".json"),e.next=15;break;case 12:return i=this.scene.stage.saveToJson(),e.next=15,window.oreo.onSaveToJson(i).then((function(){o.$Message.info({content:"Successful",duration:2})}));case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadCache:function(){var e=this;x.a.getItem(this.scene.cachekey,(function(t,n){if(t)e.$Message.warning({content:"Cache data is empty",duration:2});else{var i=JSON.parse(n);e.scene.stage.loadFromJson(i),e.$store.commit("updateInternalCache",i)}}))},saveCache:function(){var e=this.scene.stage.saveToJson();this.saveInternalCache(this.scene.cachekey,e),this.$store.commit("updateInternalCache",e)},loadInternalCache:function(){var e=this.$store.getters.internalCache;e&&this.scene.stage.loadFromJson(e)},saveInternalCache:function(e,t){var n=this;x.a.setItem(e,JSON.stringify(t),(function(t){t&&n.$Message.error({content:"Save Cache [".concat(e,"] failed"),duration:2})}))},zoomIn:function(){this.scene.stage.zoomIn()},zoomOut:function(){this.scene.stage.zoomOut()},reset:function(){this.scene.stage.reset()},undo:function(){this.scene.stage.undo()},redo:function(){this.scene.stage.redo()},clear:function(){var e=this;this.$Modal.confirm({content:"Are you sure?",title:"Tip",okText:"Ok",cancelText:"Cancel",onOk:function(){e.scene.stage.clear()}})},autoSave:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.save();case 2:t&&t();case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onClose:function(e,t){var n=this;window.oreo.isModify?this.$Modal.confirm({content:"Do you want to save the latest tree data?",title:"Warning",okText:"Yes",cancelText:"No",onOk:function(){n.autoSave(e)},onCancel:function(){t&&t()}}):t&&t()},isValid:function(){return!(!this.isBuildin&&(this.minVersion>window.oreo.version||j["a"].Utils.common.hashString(window.oreo.SHA)!=at.hash))},checkValid:function(){var e=this.isValid();return e||this.$Modal.confirm({content:"数据异常，请前往 Cocos Store 下载插件最新版本。",title:"警告",okText:"确定",cancelText:"取消",onOk:function(){console.warn("Behavior Creator 官方商店地址: ","https://store.cocos.com/app/detail/3704"),window.open("https://store.cocos.com/app/detail/3704","_blank","nodeIntegration=no")},onCancel:function(){console.warn("Behavior Creator 官方商店地址: ","https://store.cocos.com/app/detail/3704")}}),e},onFetchConfig:function(e){if(e)try{var t=JSON.parse(e);if(t&&t.content){var n=rt.a.decompressFromBase64(t.content);t.content=n,n=JSON.parse(n),n.min&&(this.minVersion=n.min,this.checkValid())}}catch(i){}}},mounted:function(){var e=this;if(this.minVersion=window.oreo.version,this.checkValid())if(this.size.width=this.$el.clientWidth,this.size.height=this.$el.clientHeight,this.scene.stage=it.init({container:"scene",width:this.size.width,height:this.size.height,message:this.$Message,events:{edit:function(e){},select:function(t){e.handleSelectCommand(t)},open:function(){e.load()},save:function(){e.save()},modify:function(e){"undefined"===typeof e&&(e=!0),window.oreo.isModify=!!e}}}),window.oreo.initOptions({stage:this.scene.stage,message:this.$Message,onRefreshComponent:function(){e.$forceUpdate()},onFetchConfig:function(t){e.onFetchConfig(t)},onClose:function(t,n){e.onClose(t,n)}}),window.oreo.initMenus(this.menu),this.isBuildin)this.loadInternalCache();else if(window.oreo.jsonAsset){var t=window.oreo.jsonAsset.json;t&&this.scene.stage.loadFromJson(t)}}},vt=ft,pt=(n("c940"),n("2877")),gt=Object(pt["a"])(vt,v,p,!1,null,"f54e8984",null),yt=gt.exports,mt={components:{Editor:yt},data:function(){return{activeIndex:"editor"}},computed:{},methods:{handleSelect:function(e,t){this.activeIndex=e;var n={name:e};this.$router.replace(n)}},mounted:function(){}},bt=mt,kt=(n("034f"),Object(pt["a"])(bt,d,f,!1,null,null,null)),wt=kt.exports,Ct="oreo-behavior-creator",zt={getKey:function(e){return"".concat(Ct,"-").concat(e)},getItem:function(e,t){e=this.getKey(e);var n=window.localStorage.getItem(e),i=n;if(n)try{n=JSON.parse(n),i=n.value,"undefined"==typeof i&&(i=t)}catch(o){console.error("parse date error: data=",n)}else i=t;return i},setItem:function(e,t){e=this.getKey(e);var n=Object(U["a"])(t),i={type:n,value:t};return i=JSON.stringify(i),window.localStorage.setItem(e,i)},getMenuVisible:function(e){var t=this.getItem("menu_visible",e);return t},setMenuVisible:function(e){this.setItem("menu_visible",e)},getMenuOnTop:function(e){return this.getItem("menu_ontop",e)},setMenuOnTop:function(e){this.setItem("menu_ontop",e)},getTabs:function(){return this.getItem("tab_collapse",{})},setTabs:function(e){this.setItem("tab_collapse",e)},getTabCollapse:function(e){var t=this.getTabs();return t[e]||(t[e]=[]),t[e]},setTabCollapse:function(e,t){var n=this.getTabs();n[e]||(n[e]=[]),n[e]=t,this.setTabs(n)}},xt=zt;i["default"].use(m["a"]);for(var Ot=new m["a"].Store({state:{debug:!0,internalCache:null,menu:{visible:xt.getMenuVisible(!0),ontop:xt.getMenuOnTop(!1)}},getters:{internalCache:function(e){return e.internalCache},menu:function(e){return e.menu},getTabCollapse:function(e){return function(e){return xt.getTabCollapse(e)}}},mutations:{updateInternalCache:function(e,t){e.debug,e.internalCache=t},switchMenuOnTop:function(e,t){e.menu.ontop=t,xt.setMenuOnTop(t)},switchMenuVisible:function(e,t){e.menu.visible=t,xt.setMenuVisible(t)},setTabCollapse:function(e,t){var n=t.name,i=t.value;xt.setTabCollapse(n,i)}},actions:{}}),St=n("3835"),jt=(n("ffc1"),{common:{appTitle:{zh:"行为树编辑器",en:"BehaviorEditor"},copyright:{zh:"©2022 OreoWang 版权所有",en:"2022 OreoWang All rights reserved."}}}),Mt={zh:{},en:{}},Tt=0,At=Object.entries(jt);Tt<At.length;Tt++)for(var It=Object(St["a"])(At[Tt],2),Dt=It[0],Rt=It[1],Lt=0,Zt=Object.entries(Rt);Lt<Zt.length;Lt++)for(var Bt=Object(St["a"])(Zt[Lt],2),Pt=Bt[0],Nt=Bt[1],Et=0,Wt=Object.entries(Nt);Et<Wt.length;Et++){var Ut=Object(St["a"])(Wt[Et],2),Ft=Ut[0],Jt=Ut[1],_t=Mt[Ft];_t||(_t={},Mt[Ft]=_t);var Ht=_t[Dt];Ht||(Ht={},_t[Dt]=Ht),Ht[Pt]=Jt}var Vt=Mt;i["default"].config.productionTip=!1,i["default"].use(r["a"]),i["default"].use(u.a),i["default"].use(o["a"]),i["default"].use(s.a),i["default"].use(l.a);var $t=new r["a"]({locale:"zh",messages:Vt});new i["default"]({store:Ot,i18n:$t,render:function(e){return e(wt)}}).$mount("#app")},"5a50":function(e,t,n){},"64a9":function(e,t,n){},9224:function(e){e.exports=JSON.parse('{"name":"oreo-behavior-editor","version":"0.0.0","hash":"2270122889","private":true,"scripts":{"serve":"vue-cli-service serve","build":"vue-cli-service build","lint":"vue-cli-service lint","test:unit":"vue-cli-service test:unit"},"dependencies":{"blob-util":"^2.0.2","codemirror":"^5.43.0","element-ui":"^2.4.11","file-saver":"^2.0.0","font-awesome":"^4.7.0","intro.js":"^2.9.3","iview":"^3.2.2","jspdf":"^1.5.3","konva":"^2.6.0","less":"^3.9.0","localforage":"^1.7.3","lodash":"^4.17.11","lz-string":"^1.4.4","orion-corvus":"^1.0.2","string-hash":"^1.1.3","uniqid":"^5.0.3","uuid":"^3.3.2","vue":"^2.5.21","vue-codemirror":"^4.0.6","vue-i18n":"^8.5.0","vue-introjs":"^1.3.2","vue-resize-directive":"^1.1.4","vue-resource":"^1.5.1","vue-router":"^3.0.7","vuex":"^3.0.1"},"devDependencies":{"@types/lz-string":"^1.3.34","@vue/cli-plugin-babel":"^3.2.0","@vue/cli-plugin-eslint":"^3.2.1","@vue/cli-plugin-unit-mocha":"^3.2.0","@vue/cli-service":"^3.2.0","@vue/eslint-config-standard":"^4.0.0","@vue/test-utils":"^1.0.0-beta.27","babel-plugin-component":"^1.1.1","chai":"^4.2.0","less-loader":"^4.1.0","node-sass":"^4.11.0","sass-loader":"^7.1.0","vue-template-compiler":"^2.5.21"},"eslintConfig":{"root":true,"env":{"node":true},"extends":["plugin:vue/recommended","@vue/standard"],"parserOptions":{"parser":"babel-eslint"}},"postcss":{"plugins":{"autoprefixer":{}}},"browserslist":["> 1%","last 2 versions","not ie <= 8"]}')},c940:function(e,t,n){"use strict";n("5a50")}});
//# sourceMappingURL=app.js.map